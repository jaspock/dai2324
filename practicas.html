<!DOCTYPE html>
<html class="writer-html5" lang="es" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>9. Enunciados de las pr√°cticas &mdash; documentaci√≥n de Desarrollo de Aplicaciones en Internet - </title>
      <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/estilos.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/translations.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="√çndice" href="genindex.html" />
    <link rel="search" title="B√∫squeda" href="search.html" />
    <link rel="prev" title="8. Problemas" href="problemas.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="index.html" class="icon icon-home"> Desarrollo de Aplicaciones en Internet
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Buscar documentos" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contenidos:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="marcado.html">1. Lenguajes de marcado</a></li>
<li class="toctree-l1"><a class="reference internal" href="estilo.html">2. Lenguajes de estilo</a></li>
<li class="toctree-l1"><a class="reference internal" href="cliente.html">3. Programar el lado del cliente</a></li>
<li class="toctree-l1"><a class="reference internal" href="servicios.html">4. Acceso a servicios web de terceros</a></li>
<li class="toctree-l1"><a class="reference internal" href="componentes.html">5. Componentes web</a></li>
<li class="toctree-l1"><a class="reference internal" href="rest.html">6. Implementaci√≥n de servicios web</a></li>
<li class="toctree-l1"><a class="reference internal" href="nube.html">7. Computaci√≥n en la  nube</a></li>
<li class="toctree-l1"><a class="reference internal" href="problemas.html">8. Problemas</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">9. Enunciados de las pr√°cticas</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#calendario">9.1. Calendario</a></li>
<li class="toctree-l2"><a class="reference internal" href="#instrucciones-de-entrega-de-las-practicas">9.2. Instrucciones de entrega de las pr√°cticas</a></li>
<li class="toctree-l2"><a class="reference internal" href="#practica-1-una-pagina-web-con-html5">9.3. Pr√°ctica 1: una p√°gina web con HTML5 üñ•Ô∏è</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#marcado">9.3.1. Marcado</a></li>
<li class="toctree-l3"><a class="reference internal" href="#estilo">9.3.2. Estilo</a></li>
<li class="toctree-l3"><a class="reference internal" href="#recomendaciones-finales">9.3.3. Recomendaciones finales</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#practica-2-una-aplicacion-web-local">9.4. Pr√°ctica 2: una aplicaci√≥n web local üñ•Ô∏è</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#eliminacion-de-la-doble-vista">9.4.1. Eliminaci√≥n de la doble vista</a></li>
<li class="toctree-l3"><a class="reference internal" href="#adicion-del-formulario-para-insertar-un-nuevo-cuestionario">9.4.2. Adici√≥n del formulario para insertar un nuevo cuestionario</a></li>
<li class="toctree-l3"><a class="reference internal" href="#estilo-del-formulario">9.4.3. Estilo del formulario</a></li>
<li class="toctree-l3"><a class="reference internal" href="#documento-html">9.4.4. Documento HTML</a></li>
<li class="toctree-l3"><a class="reference internal" href="#adicion-de-iconos-para-borrar-cada-pregunta">9.4.5. Adici√≥n de iconos para borrar cada pregunta</a></li>
<li class="toctree-l3"><a class="reference internal" href="#funciones-auxiliares-a-crear">9.4.6. Funciones auxiliares a crear</a></li>
<li class="toctree-l3"><a class="reference internal" href="#borrado-de-preguntas">9.4.7. Borrado de preguntas</a></li>
<li class="toctree-l3"><a class="reference internal" href="#incorporacion-automatica-de-los-botones-de-borrado">9.4.8. Incorporaci√≥n autom√°tica de los botones de borrado</a></li>
<li class="toctree-l3"><a class="reference internal" href="#adicion-de-formularios-de-insercion-de-preguntas">9.4.9. Adici√≥n de formularios de inserci√≥n de preguntas</a></li>
<li class="toctree-l3"><a class="reference internal" href="#insercion-de-nuevas-preguntas-en-un-cuestionario">9.4.10. Inserci√≥n de nuevas preguntas en un cuestionario</a></li>
<li class="toctree-l3"><a class="reference internal" href="#incorporacion-automatica-de-los-formularios-de-insercion-de-preguntas">9.4.11. Incorporaci√≥n autom√°tica de los formularios de inserci√≥n de preguntas</a></li>
<li class="toctree-l3"><a class="reference internal" href="#creacion-de-nuevos-cuestionarios">9.4.12. Creaci√≥n de nuevos cuestionarios</a></li>
<li class="toctree-l3"><a class="reference internal" href="#captura-de-pantalla">9.4.13. Captura de pantalla</a></li>
<li class="toctree-l3"><a class="reference internal" href="#entrega-de-la-practica">9.4.14. Entrega de la pr√°ctica</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#practica-3-una-aplicacion-con-acceso-a-servicios-web-de-terceros-y-con-componentes-web">9.5. Pr√°ctica 3: una aplicaci√≥n con acceso a servicios web de terceros y con componentes web üñ•Ô∏è</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#ejemplo-de-peticiones-get">9.5.1. Ejemplo de peticiones GET</a></li>
<li class="toctree-l3"><a class="reference internal" href="#incorporacion-de-informacion-de-la-wikipedia">9.5.2. Incorporaci√≥n de informaci√≥n de la Wikipedia</a></li>
<li class="toctree-l3"><a class="reference internal" href="#incorporacion-de-la-informacion-de-flickr">9.5.3. Incorporaci√≥n de la informaci√≥n de Flickr</a></li>
<li class="toctree-l3"><a class="reference internal" href="#creacion-de-los-componentes-web">9.5.4. Creaci√≥n de los componentes web</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id3">9.5.5. Captura de pantalla</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id4">9.5.6. Entrega de la pr√°ctica</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#practica-4-una-aplicacion-en-la-nube">9.6. Pr√°ctica 4: una aplicaci√≥n en la nube üñ•Ô∏è</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#comprobacion-de-la-aplicacion-del-carrito">9.6.1. Comprobaci√≥n de la aplicaci√≥n del carrito</a></li>
<li class="toctree-l3"><a class="reference internal" href="#incorporacion-e-implantacion-de-la-aplicacion-de-la-practica-anterior">9.6.2. Incorporaci√≥n e implantaci√≥n de la aplicaci√≥n de la pr√°ctica anterior</a></li>
<li class="toctree-l3"><a class="reference internal" href="#caracteristicas-comunes-de-los-servicios-web-a-implementar">9.6.3. Caracter√≠sticas comunes de los servicios web a implementar</a></li>
<li class="toctree-l3"><a class="reference internal" href="#almacenamiento-de-los-cuestionarios">9.6.4. Almacenamiento de los cuestionarios</a></li>
<li class="toctree-l3"><a class="reference internal" href="#representacion-de-los-datos-en-la-base-de-datos">9.6.5. Representaci√≥n de los datos en la base de datos</a></li>
<li class="toctree-l3"><a class="reference internal" href="#gestion-de-los-temas-de-los-cuestionarios">9.6.6. Gesti√≥n de los temas de los cuestionarios</a></li>
<li class="toctree-l3"><a class="reference internal" href="#gestion-de-las-preguntas-de-los-cuestionarios">9.6.7. Gesti√≥n de las preguntas de los cuestionarios</a></li>
<li class="toctree-l3"><a class="reference internal" href="#autenticacion-de-usuarios">9.6.8. Autenticaci√≥n de usuarios</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id5">9.6.9. Entrega de la pr√°ctica</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#apendice-ejemplos-de-posibles-ejercicios-para-el-examen-practico">9.7. AP√âNDICE: Ejemplos de posibles ejercicios para el examen pr√°ctico</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#colapsar-los-enunciados-de-las-preguntas">9.7.1. Colapsar los enunciados de las preguntas</a></li>
<li class="toctree-l3"><a class="reference internal" href="#destacar-algunas-preguntas-de-un-cuestionario">9.7.2. Destacar algunas preguntas de un cuestionario</a></li>
</ul>
</li>
</ul>
</li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Desarrollo de Aplicaciones en Internet</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
      <li><span class="section-number">9. </span>Enunciados de las pr√°cticas</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/practicas.rst.txt" rel="nofollow"> Ver c√≥digo fuente de la p√°gina</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="enunciados-de-las-practicas">
<h1><span class="section-number">9. </span>Enunciados de las pr√°cticas<a class="headerlink" href="#enunciados-de-las-practicas" title="Enlace permanente a este encabezado">ÔÉÅ</a></h1>
<section id="calendario">
<h2><span class="section-number">9.1. </span>Calendario<a class="headerlink" href="#calendario" title="Enlace permanente a este encabezado">ÔÉÅ</a></h2>
<p>Este es el calendario de cada uno de los entregables de la asignatura. No se admitir√°n entregas fuera de plazo.</p>
<table class="colwidths-given tablita docutils align-default">
<colgroup>
<col style="width: 15%" />
<col style="width: 40%" />
<col style="width: 15%" />
<col style="width: 15%" />
<col style="width: 15%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Entregable</p></th>
<th class="head"><p>T√≠tulo</p></th>
<th class="head"><p>Fecha l√≠mite de entrega</p></th>
<th class="head"><p>Tiempo medio estimado de realizaci√≥n</p></th>
<th class="head"><p>Porcentaje en la nota de pr√°cticas</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>P1</p></td>
<td><p><a class="reference internal" href="#practica-1-una-pagina-web-con-html5">Pr√°ctica 1: una p√°gina web con HTML5 üñ•Ô∏è</a></p></td>
<td><p>5 octubre 2022</p></td>
<td><p>8 horas</p></td>
<td><p>20%</p></td>
</tr>
<tr class="row-odd"><td><p>P2</p></td>
<td><p><a class="reference internal" href="#practica-2-una-aplicacion-web-local">Pr√°ctica 2: una aplicaci√≥n web local üñ•Ô∏è</a></p></td>
<td><p>2 noviembre 2022</p></td>
<td><p>14 horas</p></td>
<td><p>25%</p></td>
</tr>
<tr class="row-even"><td><p>P3</p></td>
<td><p><a class="reference internal" href="#practica-3-una-aplicacion-con-acceso-a-servicios-web-de-terceros-y-con-componentes-web">Pr√°ctica 3: una aplicaci√≥n con acceso a servicios web de terceros y con componentes web üñ•Ô∏è</a></p></td>
<td><p>23 noviembre 2022</p></td>
<td><p>12 horas</p></td>
<td><p>25%</p></td>
</tr>
<tr class="row-odd"><td><p>P4</p></td>
<td><p><a class="reference internal" href="#practica-4-una-aplicacion-en-la-nube">Pr√°ctica 4: una aplicaci√≥n en la nube üñ•Ô∏è</a></p></td>
<td><p>21 diciembre 2022</p></td>
<td><p>20 horas</p></td>
<td><p>30%</p></td>
</tr>
</tbody>
</table>
</section>
<section id="instrucciones-de-entrega-de-las-practicas">
<h2><span class="section-number">9.2. </span>Instrucciones de entrega de las pr√°cticas<a class="headerlink" href="#instrucciones-de-entrega-de-las-practicas" title="Enlace permanente a este encabezado">ÔÉÅ</a></h2>
<p>Realiza tu entrega en un √∫nico fichero comprimido a trav√©s del <a class="reference external" href="https://pracdlsi.dlsi.ua.es/index.cgi?id=val">servidor web del Departamento</a> antes de las 23.59 del d√≠a de la fecha l√≠mite. Recuerda que no se admitir√°n entregas fuera de plazo.</p>
</section>
<section id="practica-1-una-pagina-web-con-html5">
<h2><span class="section-number">9.3. </span>Pr√°ctica 1: una p√°gina web con HTML5 üñ•Ô∏è<a class="headerlink" href="#practica-1-una-pagina-web-con-html5" title="Enlace permanente a este encabezado">ÔÉÅ</a></h2>
<p>En esta pr√°ctica vas a crear un documento HTML5 en el que <em>todo</em> el formato recaiga en hojas de estilo CSS (por tanto, no es posible usar atributos como <code class="docutils literal notranslate"><span class="pre">style</span></code> para el formato). Tu documento se llamar√° <code class="docutils literal notranslate"><span class="pre">index.html</span></code> y tendr√° dos vistas diferentes, <em>normal</em> (la vista por defecto) y <em>compacta</em>; el usuario podr√° cambiar de vista en cualquier momento usando los enlaces a pie de p√°gina. El objetivo es que consigas un documento que se muestre exactamente como puedes ver en estas im√°genes de la <a class="reference external" href="_static/img/p1-vista-normal.png">vista normal</a> y de la <a class="reference external" href="_static/img/p1-vista-compacta.png">vista compacta</a>. Tu documento usar√° tres hojas de estilo: una con todo el contenido com√∫n a ambas vistas y dos m√°s correspondientes a cada una de las vistas. Para poder alternar entre ambas hojas de estilo, a√±ade este c√≥digo a la cabecera (<code class="docutils literal notranslate"><span class="pre">head</span></code>) de tu p√°gina:</p>
<div class="highlight-html notranslate"><div class="highlight"><pre><span></span><span class="p">&lt;</span><span class="nt">script</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;text/javascript&quot;</span><span class="p">&gt;</span>
<span class="w">  </span><span class="kd">function</span><span class="w"> </span><span class="nx">changeCSS</span><span class="p">(</span><span class="nx">cssFile</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">var</span><span class="w"> </span><span class="nx">oldlink</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s2">&quot;estilo&quot;</span><span class="p">);</span>
<span class="w">    </span><span class="kd">var</span><span class="w"> </span><span class="nx">newlink</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="s2">&quot;link&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="nx">newlink</span><span class="p">.</span><span class="nx">setAttribute</span><span class="p">(</span><span class="s2">&quot;rel&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;stylesheet&quot;</span><span class="p">);</span>
<span class="w">    </span><span class="nx">newlink</span><span class="p">.</span><span class="nx">setAttribute</span><span class="p">(</span><span class="s2">&quot;type&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;text/css&quot;</span><span class="p">);</span>
<span class="w">    </span><span class="nx">newlink</span><span class="p">.</span><span class="nx">setAttribute</span><span class="p">(</span><span class="s2">&quot;id&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;estilo&quot;</span><span class="p">);</span>
<span class="w">    </span><span class="nx">newlink</span><span class="p">.</span><span class="nx">setAttribute</span><span class="p">(</span><span class="s2">&quot;href&quot;</span><span class="p">,</span><span class="w"> </span><span class="nx">cssFile</span><span class="p">);</span>
<span class="w">    </span><span class="nb">document</span><span class="p">.</span><span class="nx">getElementsByTagName</span><span class="p">(</span><span class="s2">&quot;head&quot;</span><span class="p">)[</span><span class="mf">0</span><span class="p">].</span><span class="nx">replaceChild</span><span class="p">(</span><span class="nx">newlink</span><span class="p">,</span><span class="w"> </span><span class="nx">oldlink</span><span class="p">);</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
</pre></div>
</div>
<p>Recuerda tambi√©n a√±adir posteriormente este c√≥digo en el pie de la p√°gina cuando lo crees:</p>
<div class="highlight-html notranslate"><div class="highlight"><pre><span></span><span class="p">&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="o">=</span><span class="s">&quot;#&quot;</span> <span class="na">onclick</span><span class="o">=</span><span class="s">&quot;changeCSS(&#39;./css/normal.css&#39;);&quot;</span><span class="p">&gt;</span>Vista normal<span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;</span> |
<span class="p">&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="o">=</span><span class="s">&quot;#&quot;</span> <span class="na">onclick</span><span class="o">=</span><span class="s">&quot;changeCSS(&#39;./css/compact.css&#39;);&quot;</span><span class="p">&gt;</span>Vista compacta<span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;</span>
</pre></div>
</div>
<p>A√±ade, finalmente, un elemento como este a la cabecera de tu documento para que la vista normal sea la que se muestre por defecto:</p>
<div class="highlight-html notranslate"><div class="highlight"><pre><span></span><span class="p">&lt;</span><span class="nt">link</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;estilo&quot;</span> <span class="na">rel</span><span class="o">=</span><span class="s">&quot;stylesheet&quot;</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;text/css&quot;</span> <span class="na">href</span><span class="o">=</span><span class="s">&quot;./css/normal.css&quot;</span><span class="p">&gt;</span>
</pre></div>
</div>
<p>Es muy importante que cuando implementes tu soluci√≥n te asegures de que respetas <strong>estrictamente</strong> estas instrucciones, incluidos los nombres de identificadores, nombres de fichero, etc.; respeta las may√∫sculas y min√∫sculas, las tildes, la posici√≥n de cada elemento en el documento, etc.</p>
<section id="marcado">
<h3><span class="section-number">9.3.1. </span>Marcado<a class="headerlink" href="#marcado" title="Enlace permanente a este encabezado">ÔÉÅ</a></h3>
<p>Comienza preparando el documento HTML, sin tener en cuenta, por ahora, los aspectos estil√≠sticos. El documento HTML seguir√° los principios del lenguaje estudiados en clase. En particular, tendr√°:</p>
<ul class="simple">
<li><p>una cabecera (elemento <code class="docutils literal notranslate"><span class="pre">header</span></code>) que incluya el t√≠tulo (elemento <code class="docutils literal notranslate"><span class="pre">h1</span></code>), el p√°rrafo descriptivo y el √≠ndice (el √≠ndice ser√° un elemento de tipo <code class="docutils literal notranslate"><span class="pre">nav</span></code> que incluir√° una lista no numerada, <code class="docutils literal notranslate"><span class="pre">ul</span></code>), los tres como descendientes inmediatos (hijos) del elemento <code class="docutils literal notranslate"><span class="pre">header</span></code>;</p></li>
<li><p>la cabecera ir√° seguida de un fragmento principal (encerrado en el elemento <code class="docutils literal notranslate"><span class="pre">main</span></code>) que incluir√° ambos cuestionarios;</p></li>
<li><p>la p√°gina acabar√° con un pie de p√°gina (elemento <code class="docutils literal notranslate"><span class="pre">footer</span></code>) con tus datos y los enlaces para cambiar la vista; encierra tu nombre de usuario de <code class="docutils literal notranslate"><span class="pre">alu.ua.es</span></code> (por ejemplo, <code class="docutils literal notranslate"><span class="pre">zawm</span></code>) en un <code class="docutils literal notranslate"><span class="pre">span</span></code> (hijo de <code class="docutils literal notranslate"><span class="pre">footer</span></code>) con identificador <code class="docutils literal notranslate"><span class="pre">nombre</span></code>; utiliza el car√°cter <code class="docutils literal notranslate"><span class="pre">'|'</span></code> en el documento HTML para separar los diferentes contenidos del pie de p√°gina.</p></li>
</ul>
<p>Cada cuestionario estar√° incluido en su propia secci√≥n (mediante sendos elementos <code class="docutils literal notranslate"><span class="pre">section</span></code>, que han de incluir atributos <code class="docutils literal notranslate"><span class="pre">id</span></code>, con valores <code class="docutils literal notranslate"><span class="pre">paris</span></code>, sin tilde y todo en min√∫sculas, y <code class="docutils literal notranslate"><span class="pre">londres</span></code>, todo en min√∫sculas, que ser√°n referenciados desde el √≠ndice) y tendr√° un t√≠tulo de segundo nivel (un elemento <code class="docutils literal notranslate"><span class="pre">h2</span></code>, que ser√° hijo de <code class="docutils literal notranslate"><span class="pre">section</span></code>) que incluir√° una imagen (que no ha de coincidir necesariamente en tu soluci√≥n con la de este enunciado, pero no ha de tener tama√±o superior a 512x512 p√≠xeles) seguida del texto del t√≠tulo tal como sigue:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;</span><span class="n">section</span> <span class="o">...&gt;</span>
  <span class="o">&lt;</span><span class="n">h2</span> <span class="o">...&gt;</span>
    <span class="o">&lt;</span><span class="n">img</span> <span class="o">...&gt;</span>
    <span class="n">Cuestionario</span> <span class="n">sobre</span><span class="o">...</span>
  <span class="o">&lt;/</span><span class="n">h2</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>La forma de codificar cada pregunta ser√° la siguiente:</p>
<div class="highlight-html notranslate"><div class="highlight"><pre><span></span><span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;bloque&quot;</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;pregunta&quot;</span><span class="p">&gt;</span>
  La ciudad de Par√≠s se sit√∫a a ambos lados del r√≠o Sena.
  <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;respuesta&quot;</span> <span class="na">data-valor</span><span class="o">=</span><span class="s">&quot;true&quot;</span><span class="p">&gt;</span>
  <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</pre></div>
</div>
<p>El contador de pregunta se ha de inicializar para cada nuevo cuestionario. El atributo <code class="docutils literal notranslate"><span class="pre">data-valor</span></code> es un atributo personalizado de HTML que usaremos para almacenar la respuesta (true/false) a la pregunta. En general, no es posible a√±adir a un elemento atributos que no est√©n especificados en el est√°ndar excepto si estos comienzan por el prefijo <code class="docutils literal notranslate"><span class="pre">data-</span></code>.</p>
<p>Tanto los n√∫meros de pregunta como el texto usado en la p√°gina para indicar la respuesta correcta no pueden aparecer expl√≠citamente en el documento HTML, sino que han de ser generados din√°micamente desde CSS.</p>
</section>
<section id="estilo">
<h3><span class="section-number">9.3.2. </span>Estilo<a class="headerlink" href="#estilo" title="Enlace permanente a este encabezado">ÔÉÅ</a></h3>
<p>Una vez tengas el documento HTML finalizado, puedes pasar a dise√±ar las hojas de estilo. Para el contador de preguntas, a√±ade un n√∫mero secuencial a cada pregunta obtenido autom√°ticamente mediante un uso adecuado de los <a class="reference external" href="https://developer.mozilla.org/en-US/docs/Web/Guide/CSS/Counters">contadores de CSS</a>. Para las respuestas usa los <a class="reference external" href="http://www.smashingmagazine.com/2011/07/13/learning-to-use-the-before-and-after-pseudo-elements-in-css/">pseudoelementos CSS</a> <code class="docutils literal notranslate"><span class="pre">::before</span></code> y <code class="docutils literal notranslate"><span class="pre">::after</span></code>.</p>
<p>Se describen a continuaci√≥n las caracter√≠sticas comunes de ambas vistas:</p>
<ul class="simple">
<li><p>la p√°gina completa (elemento <code class="docutils literal notranslate"><span class="pre">body</span></code>) tiene fondo blanco, letra de color <code class="docutils literal notranslate"><span class="pre">#333333</span></code> y no tiene margen (esto es, el margen se ha de establecer expl√≠citamente a cero);</p></li>
<li><p>la cabecera (elemento <code class="docutils literal notranslate"><span class="pre">header</span></code>) tiene un ancho m√°ximo de 1080px y m√°rgenes autom√°ticos a derecha e izquierda; su ancho, adem√°s, es el 98% del de la p√°gina para que siempre haya un peque√±o margen entre el contenido de la p√°gina y la ventana del navegador; el texto de la cabecera est√° centrado;</p></li>
<li><p>los encabezados de nivel 1 usan letra negrita de 36px;</p></li>
<li><p>los encabezados de nivel 2 usan letra negrita de 25px;</p></li>
<li><p>el √≠ndice no usa ning√∫n adorno especial de lista; los enlaces del √≠ndice no aparecen subrayados; lo √∫nico que los identifica como enlaces es su color (<code class="docutils literal notranslate"><span class="pre">cornflowerblue</span></code>) y el hecho de que el cursor del rat√≥n cambia al pasar sobre ellos;</p></li>
<li><p>el fragmento principal (elemento <code class="docutils literal notranslate"><span class="pre">main</span></code>) tiene un ancho m√°ximo de 1080px y m√°rgenes autom√°ticos a derecha e izquierda; su ancho, adem√°s, es el 98% del de la p√°gina para que siempre haya un peque√±o margen entre el contenido de la p√°gina y la ventana del navegador;</p></li>
<li><p>la secci√≥n correspondiente a cada cuestionario tiene un margen superior de 80px;</p></li>
<li><p>cada pregunta (selector <code class="docutils literal notranslate"><span class="pre">.pregunta</span></code>) tiene un margen superior e inferior de 1ex;</p></li>
<li><p>el texto en otro idioma (<em>arrondissement</em>) se marca con la clase <em>idioma</em> (usa un elemento <code class="docutils literal notranslate"><span class="pre">span</span></code> para rodear la palabra) y se muestra en it√°lica;</p></li>
<li><p>la imagen junto al t√≠tulo de cada cuestionario est√° alineada verticalmente con la parte superior de la l√≠nea (<code class="docutils literal notranslate"><span class="pre">text-top</span></code>) y se escala <em>mediante CSS</em> a un tama√±o de 50x50 p√≠xels; la separa del encabezado un margen de 10px por la derecha; la imagen tiene un borde de 1px s√≥lido de color <code class="docutils literal notranslate"><span class="pre">lightgray</span></code>;</p></li>
<li><p>el pie de p√°gina (elemento <code class="docutils literal notranslate"><span class="pre">footer</span></code>) tiene una altura de 50px y un margen superior de 100px; el color de fondo es <code class="docutils literal notranslate"><span class="pre">steelblue</span></code> y su anchura abarca el 100% de la ventana del navegador; el texto de una sola l√≠nea incluido usa una letra de tama√±o 80% de color <code class="docutils literal notranslate"><span class="pre">white</span></code>, excepto para los enlaces, que usan color <code class="docutils literal notranslate"><span class="pre">lightgray</span></code>; el texto, adem√°s, est√° centrado verticalmente, lo que puedes conseguir siguiendo la primera recomendaci√≥n de <a class="reference external" href="http://stackoverflow.com/questions/9249359/is-it-possible-to-vertically-align-text-within-a-div/14850381#14850381">esta respuesta</a>; ten en cuenta, adem√°s, que si el tama√±o de la ventana de tu navegador es superior al tama√±o de la p√°gina (lo que puede suceder si abres la p√°gina sin haber a√±adido los diferentes cuestionarios), el pie de p√°gina no quedar√° pegado al borde inferior de la ventana; el comportamiento anterior es correcto y no has de cambiarlo.</p></li>
</ul>
<p>Las caracter√≠sticas particulares de la vista compacta son:</p>
<ul class="simple">
<li><p>usa el tipo de letra <a class="reference external" href="https://fonts.google.com/specimen/Ubuntu?selection.family=Ubuntu">Ubuntu</a> para todo el documento; para ver c√≥mo usar en tus estilos un tipo de letra de Google Fonts, haz clic en <span class="guilabel">Select this font</span> en la p√°gina correspondiente al tipo de letra y despu√©s haz clic en la caja que aparece en la parte inferior de la ventana;</p></li>
<li><p>cada pregunta/respuesta (selector <code class="docutils literal notranslate"><span class="pre">.bloque</span></code>) tiene  un margen superior de 10px e inferior de 20px.</p></li>
</ul>
<p>Las caracter√≠sticas particulares de la vista normal son:</p>
<ul class="simple">
<li><p>usa el tipo de letra Droid Serif  para todo el documento; la web que <a class="reference external" href="https://fonts.google.com/specimen/Droid+Serif">describ√≠a</a> este tipo de letra ya no est√° en Google Fonts, pero puedes seguir us√°ndola a√±adiendo lo siguiente a tu p√°gina:</p></li>
</ul>
<div class="highlight-html notranslate"><div class="highlight"><pre><span></span><span class="p">&lt;</span><span class="nt">link</span> <span class="na">href</span><span class="o">=</span><span class="s">&#39;https://fonts.googleapis.com/css?family=Droid+Serif&#39;</span> <span class="na">rel</span><span class="o">=</span><span class="s">&#39;stylesheet&#39;</span> <span class="na">type</span><span class="o">=</span><span class="s">&#39;text/css&#39;</span><span class="p">&gt;</span>
</pre></div>
</div>
<p>y lo siguiente a tu hoja de estilo:</p>
<div class="highlight-css notranslate"><div class="highlight"><pre><span></span><span class="nt">font-family</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;Droid Serif&#39;</span><span class="o">,</span><span class="w"> </span><span class="nt">serif</span><span class="o">;</span>
</pre></div>
</div>
<ul class="simple">
<li><p>cada pregunta/respuesta (selector <code class="docutils literal notranslate"><span class="pre">.bloque</span></code>) tiene un fondo de color <code class="docutils literal notranslate"><span class="pre">whitesmoke</span></code>; su borde es s√≥lido de 1px de ancho y color <code class="docutils literal notranslate"><span class="pre">lightgray</span></code>; el margen superior es de 10px y el inferior de 20px; el relleno (<em>padding</em>) es de 10px; la sombra de la caja se obtiene dando el siguiente valor a la propiedad CSS <code class="docutils literal notranslate"><span class="pre">box-shadow</span></code> (averigua para qu√© sirve cada par√°metro):</p></li>
</ul>
<div class="highlight-css notranslate"><div class="highlight"><pre><span></span><span class="nt">box-shadow</span><span class="o">:</span><span class="w"> </span><span class="nt">6px</span><span class="w"> </span><span class="nt">6px</span><span class="w"> </span><span class="nt">3px</span><span class="w"> </span><span class="nt">slategray</span><span class="o">;</span>
</pre></div>
</div>
<p>Aunque es una pr√°ctica habitual, no resetees a cero los m√°rgenes y el relleno de todos los estilos del documento mediante una regla que use el selector universal <code class="docutils literal notranslate"><span class="pre">*</span></code>.</p>
</section>
<section id="recomendaciones-finales">
<h3><span class="section-number">9.3.3. </span>Recomendaciones finales<a class="headerlink" href="#recomendaciones-finales" title="Enlace permanente a este encabezado">ÔÉÅ</a></h3>
<p>Aseg√∫rate de que tus ficheros se validan correctamente con los validadores HTML5 y CSS del W3C (usando la pesta√±a <span class="guilabel">Validate by File Upload</span> en ambos casos). Adem√°s, usa Chrome DevTools para comprobar que el estilo aplicado en cada punto del documento es correcto. Finalmente, aseg√∫rate de que cumple con todas las especificaciones de este enunciado (por ejemplo, los nombres o valores de atributos, elementos o ficheros).</p>
<p>Recuerda poner tu usuario de la cuenta de <code class="docutils literal notranslate"><span class="pre">alu.ua.es</span></code> (pero sin la arroba y el dominio) en el pie del documento. Realiza tu entrega en un √∫nico fichero comprimido llamado <code class="docutils literal notranslate"><span class="pre">p1-dai.zip</span></code> a trav√©s del <a class="reference external" href="https://pracdlsi.dlsi.ua.es/index.cgi?id=val">servidor web del Departamento</a>. El archivo comprimido contendr√° directamente (sin ninguna carpeta contenedora) el fichero <code class="docutils literal notranslate"><span class="pre">index.html</span></code>, una carpeta <code class="docutils literal notranslate"><span class="pre">css</span></code> con los ficheros con las hojas de estilo que hayas usado y una carpeta <code class="docutils literal notranslate"><span class="pre">img</span></code> con las im√°genes.</p>
<p>Por √∫ltimo, coloca en alg√∫n punto del pie de la p√°gina un fragmento de HTML como <code class="docutils literal notranslate"><span class="pre">&lt;span</span> <span class="pre">id=&quot;tiempo&quot;&gt;[5</span> <span class="pre">horas]&lt;/span&gt;</span></code> donde has de sustituir el 5 por el n√∫mero de horas aproximadas que te haya llevado hacer esta pr√°tica.</p>
</section>
</section>
<section id="practica-2-una-aplicacion-web-local">
<h2><span class="section-number">9.4. </span>Pr√°ctica 2: una aplicaci√≥n web local üñ•Ô∏è<a class="headerlink" href="#practica-2-una-aplicacion-web-local" title="Enlace permanente a este encabezado">ÔÉÅ</a></h2>
<p>En esta pr√°ctica extender√°s la pr√°ctica anterior con la incorporaci√≥n de elementos din√°micos mediante JavaScript. En particular, ser√° posible a√±adir y eliminar cuestionarios, as√≠ como a√±adir y eliminar sus preguntas; todo ello en el navegador, sin interaccionar con ning√∫n servidor o base de datos. Para ello, la secci√≥n <code class="docutils literal notranslate"><span class="pre">main</span></code> del documento tendr√° al principio un formulario que permitir√° a√±adir nuevos cuestionarios indicando su t√≠tulo y su imagen asociada; adem√°s, al principio de cada cuestionario (tras el t√≠tulo e inmediatamente antes de la primera pregunta, si la hubiera) se mostrar√° otro formulario que permitir√° a√±adir una nueva pregunta y su respuesta (verdadero o falso) al final del cuestionario correspondiente. Se permitir√°, adem√°s, borrar individualmente las preguntas de los cuestionarios.</p>
<p>Aseg√∫rate de que sigues los siguientes pasos en el orden en que aparecen en estas instrucciones para que la realizaci√≥n de la pr√°ctica sea m√°s sencilla. Repasa, adem√°s, todo lo estudiado en clase sobre JavaScript antes de comenzar la implementaci√≥n. No puedes utilizar ninguna librer√≠a externa en tu soluci√≥n. Al igual que en la pr√°ctica anterior, tu documento ha de ser v√°lido en cada momento.</p>
<section id="eliminacion-de-la-doble-vista">
<h3><span class="section-number">9.4.1. </span>Eliminaci√≥n de la doble vista<a class="headerlink" href="#eliminacion-de-la-doble-vista" title="Enlace permanente a este encabezado">ÔÉÅ</a></h3>
<p>Elimina las dos vistas del documento de la pr√°ctica anterior y deja √∫nicamente la vista <em>normal</em>. Para ello, borra todo el c√≥digo JavaScript relacionado con el cambio de estilo, as√≠ como los dos enlaces que hab√≠a en el pie de p√°gina para alternar entre los dos estilos. Fusiona todo el CSS que afectaba a la vista <em>normal</em> en un √∫nico documento CSS de nombre <code class="docutils literal notranslate"><span class="pre">normal.css</span></code>.</p>
</section>
<section id="adicion-del-formulario-para-insertar-un-nuevo-cuestionario">
<h3><span class="section-number">9.4.2. </span>Adici√≥n del formulario para insertar un nuevo cuestionario<a class="headerlink" href="#adicion-del-formulario-para-insertar-un-nuevo-cuestionario" title="Enlace permanente a este encabezado">ÔÉÅ</a></h3>
<p>A√±ade el siguiente c√≥digo al principio del bloque <code class="docutils literal notranslate"><span class="pre">main</span></code> de tu documento:</p>
<div class="highlight-html notranslate"><div class="highlight"><pre><span></span><span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;formulario&quot;</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;nuevoCuestionario&quot;</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">ul</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">li</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nt">label</span><span class="p">&gt;</span>Tema del cuestionario:<span class="p">&lt;/</span><span class="nt">label</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;text&quot;</span> <span class="na">name</span><span class="o">=</span><span class="s">&quot;tema&quot;</span> <span class="na">autofocus</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">li</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nt">label</span><span class="p">&gt;</span>URL de la imagen:<span class="p">&lt;/</span><span class="nt">label</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;url&quot;</span> <span class="na">name</span><span class="o">=</span><span class="s">&quot;imagen&quot;</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">li</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;button&quot;</span> <span class="na">name</span><span class="o">=</span><span class="s">&quot;crea&quot;</span> <span class="na">value</span><span class="o">=</span><span class="s">&quot;Crear nuevo cuestionario&quot;</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
  <span class="p">&lt;/</span><span class="nt">ul</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</pre></div>
</div>
<p>Este c√≥digo define los elementos necesarios para el formulario de creaci√≥n de un nuevo cuestionario. Cada campo a insertar se representa en el formulario con una etiqueta (elemento <code class="docutils literal notranslate"><span class="pre">&lt;label&gt;</span></code>) y una entrada (elemento <code class="docutils literal notranslate"><span class="pre">&lt;input&gt;</span></code>); ambos se incluyen como elementos dentro de una lista. El bot√≥n que se a√±ade como √∫ltimo elemento de la lista ejecutar√° al ser pulsado el c√≥digo JavaScript de creaci√≥n del cuestionario. Es importante que respetes escrupulosamente el fragmento de c√≥digo anterior, incluyendo los nombres de las clases e identificadores.</p>
<p>Date cuenta de que, en este caso, no usamos un elemento de tipo <code class="docutils literal notranslate"><span class="pre">&lt;form&gt;</span></code>, sino un <code class="docutils literal notranslate"><span class="pre">&lt;div&gt;</span></code> para contener el formulario, con lo que no es necesario desactivar el env√≠o de datos y la recarga autom√°tica de la p√°gina que ocurre con los formularios de tipo <code class="docutils literal notranslate"><span class="pre">&lt;form&gt;</span></code>.</p>
<p>Todos los formularios de la aplicaci√≥n han de permitir a√±adir nuevos cuestionarios o preguntas pulsando la tecla <code class="docutils literal notranslate"><span class="pre">enter</span></code> dentro del cuadro de texto, adem√°s de haciendo clic en el bot√≥n correspondiente. Tendr√°s que basarte para ello en el evento <code class="docutils literal notranslate"><span class="pre">keydown</span></code> y en propiedades como <code class="docutils literal notranslate"><span class="pre">KeyboardEvent.key</span></code>; observa, de paso, que probablemente encontrar√°s mucha informaci√≥n en la web sobre eventos como <code class="docutils literal notranslate"><span class="pre">keypress</span></code> o propiedades como <code class="docutils literal notranslate"><span class="pre">KeyboardEvent.keyCode</span></code>, pero ambas est√°n obsoletas y desaparecer√°n de funcionas versiones de los navegadores. En el desarrollo web es importante que siempre te asegures de que las funciones o propiedades son las adecuadas; puedes consultar para ello webs de referencia como Mozilla Developer Network.</p>
</section>
<section id="estilo-del-formulario">
<h3><span class="section-number">9.4.3. </span>Estilo del formulario<a class="headerlink" href="#estilo-del-formulario" title="Enlace permanente a este encabezado">ÔÉÅ</a></h3>
<p>Respeta las siguientes directrices a la de hora de dar estilo al formulario. Como m√°s adelante usar√°s estos mismos estilos para el resto de formularios, basa tus selectores de CSS en la clase <code class="docutils literal notranslate"><span class="pre">.formulario</span></code> y no en el atributo <code class="docutils literal notranslate"><span class="pre">id</span></code> del formulario del apartado anterior:</p>
<ul class="simple">
<li><p>el elemento <code class="docutils literal notranslate"><span class="pre">&lt;ul&gt;</span></code> que contiene los distintos campos no usa ning√∫n estilo de lista para sus elementos (de lo contrario, aparecer√≠a un topo o bala antes de cada elemento de la lista) y no tiene relleno (el <em>padding</em> es cero); adem√°s, su margen superior es de 30px, el inferior de 20px y el derecho e izquierdo son de 0px;</p></li>
<li><p>cada elemento de la lista (elemento <code class="docutils literal notranslate"><span class="pre">&lt;li&gt;</span></code>) tiene un relleno (por los cuatro lados) de 12px y un borde inferior s√≥lido de grosor 1px y color <code class="docutils literal notranslate"><span class="pre">#eee</span></code>;</p></li>
<li><p>adem√°s, el primer elemento de la lista tendr√° un borde superior s√≥lido de grosor 1px y color #777; el √∫ltimo elemento de la lista tendr√° un borde inferior de id√©nticas caracter√≠sticas; identifica cu√°l de las <a class="reference external" href="https://developer.mozilla.org/en-US/docs/Learn/CSS/Building_blocks/Selectors/Pseudo-classes_and_pseudo-elements">pseudoclases de CSS</a> te puede ser √∫til para esto;</p></li>
<li><p>el contenido de los elementos <code class="docutils literal notranslate"><span class="pre">&lt;label&gt;</span></code> se ha de mostrar con el valor <code class="docutils literal notranslate"><span class="pre">inline-block</span></code> para la propiedad <code class="docutils literal notranslate"><span class="pre">display</span></code> (que trata el contenido del elemento como una combinaci√≥n de <code class="docutils literal notranslate"><span class="pre">inline</span></code> y <code class="docutils literal notranslate"><span class="pre">block</span></code>) lo que nos permitir√° darle un ancho fijo de 15em y conseguir que las cajas de introducci√≥n de texto queden bien alineadas unas respecto a otras;</p></li>
<li><p>aquellos elementos de tipo <code class="docutils literal notranslate"><span class="pre">&lt;input&gt;</span></code> del formulario que tengan su atributo <code class="docutils literal notranslate"><span class="pre">type</span></code> con valor <code class="docutils literal notranslate"><span class="pre">text</span></code> o <code class="docutils literal notranslate"><span class="pre">url</span></code> (el bot√≥n, por tanto, queda excluido) tendr√° un borde s√≥lido de 1px de grosor y color <code class="docutils literal notranslate"><span class="pre">#aaa</span></code>; a√±√°deles, adem√°s, estos atributos para conseguir una mayor definici√≥n de la caja:</p></li>
</ul>
<div class="highlight-css notranslate"><div class="highlight"><pre><span></span><span class="nt">box-shadow</span><span class="o">:</span><span class="w"> </span><span class="nt">0px</span><span class="w"> </span><span class="nt">0px</span><span class="w"> </span><span class="nt">3px</span><span class="w"> </span><span class="p">#</span><span class="nn">ccc</span><span class="o">,</span><span class="w"> </span><span class="nt">0</span><span class="w"> </span><span class="nt">5px</span><span class="w"> </span><span class="nt">8px</span><span class="w"> </span><span class="p">#</span><span class="nn">eee</span><span class="w"> </span><span class="nt">inset</span><span class="o">;</span>
<span class="nt">border-radius</span><span class="p">:</span><span class="nd">2px</span><span class="o">;</span>
</pre></div>
</div>
</section>
<section id="documento-html">
<h3><span class="section-number">9.4.4. </span>Documento HTML<a class="headerlink" href="#documento-html" title="Enlace permanente a este encabezado">ÔÉÅ</a></h3>
<p>Las √∫nicas diferencias en el documento HTML respecto a la pr√°ctica anterior es la supresi√≥n de todo lo relacionado con el uso de las dos hojas de estilo, la incorporaci√≥n del formulario de creaci√≥n de cuestionarios y, evidentemente, la inserci√≥n de un elemento <code class="docutils literal notranslate"><span class="pre">&lt;script&gt;</span></code> para cargar desde un fichero externo (atributo <code class="docutils literal notranslate"><span class="pre">src</span></code> de <code class="docutils literal notranslate"><span class="pre">&lt;script&gt;</span></code>) el c√≥digo JavaScript que escribas. Ten en cuenta que tu documento HTML no puede contener ning√∫n c√≥digo en CSS ni en JavaScript.</p>
</section>
<section id="adicion-de-iconos-para-borrar-cada-pregunta">
<h3><span class="section-number">9.4.5. </span>Adici√≥n de iconos para borrar cada pregunta<a class="headerlink" href="#adicion-de-iconos-para-borrar-cada-pregunta" title="Enlace permanente a este encabezado">ÔÉÅ</a></h3>
<p>En primer lugar, vamos a a√±adir a las (cinco) cajas existentes para bloques de pregunta un icono que permita eliminar el bloque completo (n√∫mero, enunciado y respuesta) de la p√°gina. Crea para ello una funci√≥n <code class="docutils literal notranslate"><span class="pre">addCruz</span></code> que reciba como par√°metro un objeto de tipo nodo que apunte a un elemento de clase <code class="docutils literal notranslate"><span class="pre">.bloque</span></code>. La funci√≥n crear√° un nodo que contega un elemento como el siguiente</p>
<div class="highlight-html notranslate"><div class="highlight"><pre><span></span><span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;borra&quot;</span><span class="p">&gt;</span>‚òí<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</pre></div>
</div>
<p>y lo insertar√° como primer hijo del nodo <code class="docutils literal notranslate"><span class="pre">.bloque</span></code> pasado como par√°metro. El contenido corresponde al car√°cter Unicode <a class="reference external" href="http://unicode-table.com/en/2612/">2612</a>.</p>
<p>El estilo de los elementos de clase <code class="docutils literal notranslate"><span class="pre">.borra</span></code> usar√° posicionamiento absoluto para situarse a 2px del extremo derecho y 1px del extremo superior de la caja del elemento <code class="docutils literal notranslate"><span class="pre">.bloque</span></code> que lo contiene. <em>Nota:</em> para que este posicionamiento funcione tendr√°s que <em>posicionar</em> el elemento <code class="docutils literal notranslate"><span class="pre">.bloque</span></code>. Adem√°s, el cursor del rat√≥n al pasar por encima de la cruz de borrado adoptar√° el estilo <code class="docutils literal notranslate"><span class="pre">pointer</span></code>. Ten en cuenta que estos estilos (u otros de esta pr√°ctica) no se aplicar√°n directamente desde el c√≥digo en JavaScript, sino que este se limitar√° a asignar determinados valores al atributo <code class="docutils literal notranslate"><span class="pre">class</span></code> de los elementos y ser√° la hoja de estilo CSS la que establezca las propiedades est√©ticas oportunas.</p>
<p>Por √∫ltimo, a√±ade un manejador de evento al nuevo nodo de manera que se invoque a una funci√≥n <code class="docutils literal notranslate"><span class="pre">borraPregunta</span></code> (definida m√°s adelante) cuando se haga clic en el elemento.</p>
<p>Recuerda que puedes evaluar la correcci√≥n de tu funci√≥n desde la consola de JavaScript del navegador.</p>
</section>
<section id="funciones-auxiliares-a-crear">
<h3><span class="section-number">9.4.6. </span>Funciones auxiliares a crear<a class="headerlink" href="#funciones-auxiliares-a-crear" title="Enlace permanente a este encabezado">ÔÉÅ</a></h3>
<p>Durante la implementaci√≥n de la pr√°ctica te ser√°n de utilidad algunas funciones que puedes definir y evaluar ahora:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">insertAsLastChild(padre,nuevoHijo)</span></code>: inserta el nodo <code class="docutils literal notranslate"><span class="pre">nuevoHijo</span></code> como √∫ltimo hijo del nodo <code class="docutils literal notranslate"><span class="pre">padre</span></code>; esta funci√≥n puede delegar en la funci√≥n <a class="reference external" href="https://developer.mozilla.org/en-US/docs/Web/API/ParentNode/append">append</a> directamente.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">insertAsFirstChild(padre,nuevoHijo)</span></code>: inserta el nodo <code class="docutils literal notranslate"><span class="pre">nuevoHijo</span></code> como primer hijo del nodo <code class="docutils literal notranslate"><span class="pre">padre</span></code>; esta funci√≥n puede delegar en <a class="reference external" href="https://developer.mozilla.org/en-US/docs/Web/API/ParentNode/prepend">prepend</a> directamente.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">insertBeforeChild(padre,hijo,nuevoHijo)</span></code>: inserta el nodo <code class="docutils literal notranslate"><span class="pre">nuevoHijo</span></code> como hijo del nodo <code class="docutils literal notranslate"><span class="pre">padre</span></code> inmediatamente antes del nodo <code class="docutils literal notranslate"><span class="pre">hijo</span></code>; esta funci√≥n usar√° <a class="reference external" href="https://developer.mozilla.org/en-US/docs/Web/API/Node/insertBefore">insertBefore</a>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">removeElement(nodo)</span></code>: elimina del DOM el nodo pasado como par√°metro; esta funci√≥n puede delegar en <a class="reference external" href="https://developer.mozilla.org/en-US/docs/Web/API/ChildNode/remove">remove</a> directamente.</p></li>
</ul>
<p>No es obligatorio que definas todas las funciones anteriores. La idea es que tengas presente mientras programas una especie de <em>caja de herramientas</em> de funciones que te pueden ser √∫tiles en uno u otro momento, pero, dado que algunas son extremadamente cortas, puedes usar las funciones adecuadas del API del navegador directamente.</p>
<p>Adem√°s, te ser√° de suma utilidad disponer de una funci√≥n que funcione de forma similar a <code class="docutils literal notranslate"><span class="pre">querySelector</span></code> pero buscando el primer ancestro (en lugar de descendiente) que concuerde con el selector:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">queryAncestorSelector(node,selector)</span></code>: devuelve el ancestro m√°s cercano a <code class="docutils literal notranslate"><span class="pre">node</span></code> que case con el selector indicado como segundo par√°metro o <code class="docutils literal notranslate"><span class="pre">null</span></code> si no existe ninguno; <code class="docutils literal notranslate"><span class="pre">node</span></code> ha de ser un nodo inferior en el √°rbol a <code class="docutils literal notranslate"><span class="pre">document.body</span></code>.</p></li>
</ul>
<p>La siguiente es una posible implementaci√≥n de la funci√≥n que puedes copiar en tu pr√°ctica despu√©s de asegurarte de que la entiendes perfectamente:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kd">function</span><span class="w"> </span><span class="nx">queryAncestorSelector</span><span class="w"> </span><span class="p">(</span><span class="nx">node</span><span class="p">,</span><span class="nx">selector</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="kd">var</span><span class="w"> </span><span class="nx">parent</span><span class="o">=</span><span class="w"> </span><span class="nx">node</span><span class="p">.</span><span class="nx">parentNode</span><span class="p">;</span>
<span class="w">  </span><span class="kd">var</span><span class="w"> </span><span class="nx">all</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">document</span><span class="p">.</span><span class="nx">querySelectorAll</span><span class="p">(</span><span class="nx">selector</span><span class="p">);</span>
<span class="w">  </span><span class="kd">var</span><span class="w"> </span><span class="nx">found</span><span class="o">=</span><span class="w"> </span><span class="kc">false</span><span class="p">;</span>
<span class="w">  </span><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="nx">parent</span><span class="w"> </span><span class="o">!==</span><span class="w"> </span><span class="nb">document</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="o">!</span><span class="nx">found</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kd">var</span><span class="w"> </span><span class="nx">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">0</span><span class="p">;</span><span class="w"> </span><span class="nx">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="nx">all</span><span class="p">.</span><span class="nx">length</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="o">!</span><span class="nx">found</span><span class="p">;</span><span class="w"> </span><span class="nx">i</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nx">found</span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="nx">all</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="nx">parent</span><span class="p">)</span><span class="o">?</span><span class="kc">true</span><span class="o">:</span><span class="kc">false</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="nx">parent</span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="nx">found</span><span class="p">)</span><span class="o">?</span><span class="nx">parent</span><span class="p">.</span><span class="nx">parentNode</span><span class="o">:</span><span class="nx">parent</span><span class="p">;</span>
<span class="w">  </span><span class="p">}</span>
<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="p">(</span><span class="nx">found</span><span class="p">)</span><span class="o">?</span><span class="nx">parent</span><span class="o">:</span><span class="kc">null</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Nota</p>
<p>Versiones recientes de los navegadores permiten usar la funci√≥n <a class="reference external" href="https://developer.mozilla.org/en-US/docs/Web/API/Element/closest">closest</a> que tiene un comportamiento similar a <code class="docutils literal notranslate"><span class="pre">queryAncestorSelector</span></code>, pero no es necesario que la uses en tu pr√°ctica.</p>
</div>
<p>Esta funci√≥n la usaras cuando desde un nodo determinado del DOM quieras acceder a un ancestro para el que conoces un selector, pero no conoces la <em>distancia</em> exacta a la que se encuentra o no te interesa hacer que tu c√≥digo dependa en exceso de dicha distancia porque en el futuro podr√≠a haber m√°s nodos intermedios en el √°rbol y no quieres tener que modificar el c√≥digo de JavaScript si esto ocurre. Por ejemplo, considera este fragmento de HTML:</p>
<div class="highlight-html notranslate"><div class="highlight"><pre><span></span><span class="p">&lt;</span><span class="nt">a</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">b</span><span class="p">&gt;</span>
    ...
    <span class="p">&lt;</span><span class="nt">c</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nt">d</span><span class="p">&gt;</span>
      <span class="p">&lt;/</span><span class="nt">d</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nt">c</span><span class="p">&gt;</span>
    ...
    <span class="p">&lt;</span><span class="nt">e</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nt">e</span><span class="p">&gt;</span>
    ...
    <span class="p">&lt;</span><span class="nt">f</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nt">f</span><span class="p">&gt;</span>
  <span class="p">&lt;/</span><span class="nt">b</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;</span>
</pre></div>
</div>
<p>Si <code class="docutils literal notranslate"><span class="pre">x</span></code> representa el nodo correspondiente al elemento <code class="docutils literal notranslate"><span class="pre">d</span></code> y quieres acceder a informaci√≥n del nodo <code class="docutils literal notranslate"><span class="pre">a</span></code>, podr√≠a hacerse algo como:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="nx">x</span><span class="p">.</span><span class="nx">parentNode</span><span class="p">.</span><span class="nx">parentNode</span><span class="p">.</span><span class="nx">parentNode</span>
</pre></div>
</div>
<p>o, con ayuda de la nueva funcion, simplemente</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="nx">queryAncestorSelector</span><span class="p">(</span><span class="nx">x</span><span class="p">,</span><span class="s2">&quot;a&quot;</span><span class="p">);</span>
</pre></div>
</div>
<p>Otro ejemplo: para acceder al elemento <code class="docutils literal notranslate"><span class="pre">f</span></code> desde <code class="docutils literal notranslate"><span class="pre">x</span></code>, se puede hacer:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="nx">queryAncestorSelector</span><span class="p">(</span><span class="nx">x</span><span class="p">,</span><span class="s2">&quot;b&quot;</span><span class="p">).</span><span class="nx">querySelector</span><span class="p">(</span><span class="s2">&quot;f&quot;</span><span class="p">);</span>
</pre></div>
</div>
</section>
<section id="borrado-de-preguntas">
<h3><span class="section-number">9.4.7. </span>Borrado de preguntas<a class="headerlink" href="#borrado-de-preguntas" title="Enlace permanente a este encabezado">ÔÉÅ</a></h3>
<p>Escribe ahora el c√≥digo para <code class="docutils literal notranslate"><span class="pre">borraPregunta</span></code>, el manejador del evento discutido en m√°s arriba. Esta funci√≥n usar√° el objeto de tipo evento recibido como par√°metro para acceder al elemento sobre el que se ha hecho clic. A partir de este elemento, usando <code class="docutils literal notranslate"><span class="pre">queryAncestorSelector</span></code>, acceder√° al ancestro con selector <code class="docutils literal notranslate"><span class="pre">.bloque</span></code> y lo eliminar√° del documento, es decir, eliminar√° el nodo correspondiente del DOM. Adem√°s, cuando el cuestionario se quede sin ninguna pregunta, este se eliminar√° por completo del DOM, as√≠ como su entrada en el √≠ndice al principio de la p√°gina.</p>
</section>
<section id="incorporacion-automatica-de-los-botones-de-borrado">
<h3><span class="section-number">9.4.8. </span>Incorporaci√≥n autom√°tica de los botones de borrado<a class="headerlink" href="#incorporacion-automatica-de-los-botones-de-borrado" title="Enlace permanente a este encabezado">ÔÉÅ</a></h3>
<p>Crea una funci√≥n <code class="docutils literal notranslate"><span class="pre">init</span></code>, que sea invocada por el manejador del evento <code class="docutils literal notranslate"><span class="pre">DOMContentLoaded</span></code> y que recorra todos los elementos de clase <code class="docutils literal notranslate"><span class="pre">.bloque</span></code> e invoque la funci√≥n <code class="docutils literal notranslate"><span class="pre">addCruz</span></code> (definida anteriormente) sobre cada uno de ellos. En estos momentos, al abrir tu documento, cada pregunta deber√≠a tener su icono de borrado y deber√≠a ser posible dejar el documento sin cuestionarios tras borrar todos los bloques de preguntas.</p>
</section>
<section id="adicion-de-formularios-de-insercion-de-preguntas">
<h3><span class="section-number">9.4.9. </span>Adici√≥n de formularios de inserci√≥n de preguntas<a class="headerlink" href="#adicion-de-formularios-de-insercion-de-preguntas" title="Enlace permanente a este encabezado">ÔÉÅ</a></h3>
<p>A diferencia del formulario de creaci√≥n de cuestionarios, el formulario de adici√≥n de una nueva pregunta se crea din√°micamente para cada cuestionario. Crea ahora una funci√≥n <code class="docutils literal notranslate"><span class="pre">addFormPregunta</span></code> que se encargue de ello. Esta funci√≥n recibe como par√°metro el nodo correspondiente al elemento <code class="docutils literal notranslate"><span class="pre">section</span></code> de un determinado cuestionario, crea din√°micamente un formulario como el siguiente y lo inserta a continuaci√≥n del t√≠tulo del cuestionario (antes de la primera pregunta, si la hubiera):</p>
<div class="highlight-html notranslate"><div class="highlight"><pre><span></span><span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;formulario&quot;</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">ul</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">li</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nt">label</span><span class="p">&gt;</span>Enunciado de la pregunta:<span class="p">&lt;/</span><span class="nt">label</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;text&quot;</span> <span class="na">name</span><span class="o">=</span><span class="s">&quot;paris_pregunta&quot;</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">li</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nt">label</span><span class="p">&gt;</span>Respuesta:<span class="p">&lt;/</span><span class="nt">label</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;radio&quot;</span> <span class="na">name</span><span class="o">=</span><span class="s">&quot;paris_respuesta&quot;</span> <span class="na">value</span><span class="o">=</span><span class="s">&quot;verdadero&quot;</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;paris_v&quot;</span> <span class="na">checked</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nt">label</span> <span class="na">for</span><span class="o">=</span><span class="s">&quot;paris_v&quot;</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;radio&quot;</span><span class="p">&gt;</span>Verdadero<span class="p">&lt;/</span><span class="nt">label</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;radio&quot;</span> <span class="na">name</span><span class="o">=</span><span class="s">&quot;paris_respuesta&quot;</span> <span class="na">value</span><span class="o">=</span><span class="s">&quot;falso&quot;</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;paris_f&quot;</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nt">label</span> <span class="na">for</span><span class="o">=</span><span class="s">&quot;paris_f&quot;</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;radio&quot;</span><span class="p">&gt;</span>Falso<span class="p">&lt;/</span><span class="nt">label</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">li</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;button&quot;</span> <span class="na">value</span><span class="o">=</span><span class="s">&quot;A√±adir nueva pregunta&quot;</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
  <span class="p">&lt;/</span><span class="nt">ul</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</pre></div>
</div>
<p>Un comentario sobre los atributos <code class="docutils literal notranslate"><span class="pre">name</span></code> de los botones de radio: dado que estos no pueden tener los mismos valores para los distintos formularios del documento (de otro modo, todos los botones de radio ser√≠an considerados como un √∫nico conjunto por el navegador y activar uno de ellos en un cuestionario desactivar√≠a el resto de botones en los otros cuestionarios), en esta pr√°ctica has de a√±adir como prefijo de la cadena que elijas el valor del atributo <code class="docutils literal notranslate"><span class="pre">id</span></code> del elemento <code class="docutils literal notranslate"><span class="pre">section</span></code> correspondiente seguido de un car√°cter de subrayado. Tendr√°s que hacer algo similar para evitar duplicados con los atributos <code class="docutils literal notranslate"><span class="pre">id</span></code> y los correspondientes atributos <code class="docutils literal notranslate"><span class="pre">for</span></code> de los botones de radio y las etiquetas asociadas. Por tanto, los valores <code class="docutils literal notranslate"><span class="pre">paris_pregunta</span></code>, <code class="docutils literal notranslate"><span class="pre">paris_respuesta</span></code>, <code class="docutils literal notranslate"><span class="pre">paris_v</span></code> y <code class="docutils literal notranslate"><span class="pre">paris_f</span></code> del c√≥digo anterior son meramente ilustrativos y han de ser sustituidos por los valores correctos en cada cuestionario.</p>
<p>Para que las etiquetas (<code class="docutils literal notranslate"><span class="pre">&lt;label&gt;</span></code>) con verdadero y falso que acompa√±an a los botones de radio no est√©n excesivamente separadas entre ellas, a√±ade una regla de CSS que establezca un ancho de <code class="docutils literal notranslate"><span class="pre">5em</span></code> para el selector <code class="docutils literal notranslate"><span class="pre">label.radio</span></code>. Observa de paso c√≥mo estos elementos favorecen la accesibilidad al indicar expl√≠citamente mediante el atributo <code class="docutils literal notranslate"><span class="pre">for</span></code> el bot√≥n de radio al que complementan.</p>
<p>La funci√≥n finalizar√° especificando la funci√≥n <code class="docutils literal notranslate"><span class="pre">addPregunta</span></code> (analizada a continuaci√≥n) como funci√≥n manejadora del evento de clic sobre el bot√≥n.</p>
</section>
<section id="insercion-de-nuevas-preguntas-en-un-cuestionario">
<h3><span class="section-number">9.4.10. </span>Inserci√≥n de nuevas preguntas en un cuestionario<a class="headerlink" href="#insercion-de-nuevas-preguntas-en-un-cuestionario" title="Enlace permanente a este encabezado">ÔÉÅ</a></h3>
<p>Al igual que la funci√≥n <code class="docutils literal notranslate"><span class="pre">borraPregunta</span></code>, la funci√≥n <code class="docutils literal notranslate"><span class="pre">addPregunta</span></code> utilizar√° tambi√©n el objeto de tipo evento recibido como par√°metro para acceder (con ayuda de funciones como <code class="docutils literal notranslate"><span class="pre">querySelectorAncestor</span></code> o <code class="docutils literal notranslate"><span class="pre">querySelector</span></code>) a los datos introducidos en el formulario correspondiente.</p>
<p>En primer lugar, la funci√≥n comprobar√° que ninguno de los campos del formulario haya quedado sin rellenar; si alguno de los campos estuviera vac√≠o, se mostrar√° un <a class="reference external" href="https://developer.mozilla.org/en-US/docs/Web/API/Window.alert">di√°logo de alerta</a> con un texto descriptivo de la causa del error que puedes escoger libremente. En otro caso, se proceder√° a crear un nuevo elemento <code class="docutils literal notranslate"><span class="pre">&lt;div&gt;</span></code> de clase <code class="docutils literal notranslate"><span class="pre">.bloque</span></code> para la nueva pregunta, al que se a√±adir√° el icono de borrado mediante una llamada a la funci√≥n <code class="docutils literal notranslate"><span class="pre">addCruz</span></code>.</p>
<p>Finalmente, la funci√≥n dejar√° en blanco el contenido de los campos del formulario, excepto el correspondiente a los botones de radio, que se quedar√° en el valor <em>verdadero</em>.</p>
</section>
<section id="incorporacion-automatica-de-los-formularios-de-insercion-de-preguntas">
<h3><span class="section-number">9.4.11. </span>Incorporaci√≥n autom√°tica de los formularios de inserci√≥n de preguntas<a class="headerlink" href="#incorporacion-automatica-de-los-formularios-de-insercion-de-preguntas" title="Enlace permanente a este encabezado">ÔÉÅ</a></h3>
<p>A√±ade c√≥digo a la funci√≥n <code class="docutils literal notranslate"><span class="pre">init</span></code> que recorra todos los elementos de tipo <code class="docutils literal notranslate"><span class="pre">section</span></code> del documento inicial e inserte en ellos los formularios de adici√≥n de preguntas con la funci√≥n definida anteriormente.</p>
</section>
<section id="creacion-de-nuevos-cuestionarios">
<h3><span class="section-number">9.4.12. </span>Creaci√≥n de nuevos cuestionarios<a class="headerlink" href="#creacion-de-nuevos-cuestionarios" title="Enlace permanente a este encabezado">ÔÉÅ</a></h3>
<p>A√±ade tambi√©n a la funci√≥n <code class="docutils literal notranslate"><span class="pre">init</span></code> c√≥digo que asocie la funci√≥n <code class="docutils literal notranslate"><span class="pre">addCuestionario</span></code> explicada a continuaci√≥n como manejadora del evento de clic sobre el bot√≥n del formulario de creaci√≥n de nuevo formulario.</p>
<p>La funci√≥n <code class="docutils literal notranslate"><span class="pre">addCuestionario</span></code> utilizar√° el objeto de tipo evento recibido como par√°metro para acceder (con ayuda de funciones como <code class="docutils literal notranslate"><span class="pre">querySelectorAncestor</span></code> o <code class="docutils literal notranslate"><span class="pre">querySelector</span></code>) a los datos introducidos en el formulario de creaci√≥n de cuestionarios. La funci√≥n comprobar√° que ninguno de los campos del formulario haya quedado sin rellenar; si alguno de los campos estuviera vac√≠o, se mostrar√° un di√°logo de alerta con un texto descriptivo de la causa del error que puedes escoger libremente. No has de comprobar, en cualquier caso, que la URL indicada sea v√°lida ni corresponda a una imagen existente en internet. Si todos los campos del formulario se han rellenado, se proceder√° a crear un elemento de tipo <code class="docutils literal notranslate"><span class="pre">&lt;section&gt;</span></code> que acoger√° un nuevo formulario y que se a√±adir√° a continuaci√≥n del √∫ltimo formulario de la p√°gina. El t√≠tulo del cuestionario ser√° ¬´Cuestionario sobre ¬ª seguido del valor del primer campo del formulario; la URL de la imagen a usar ser√° la indicada en el segundo campo. Recuerda tambi√©n que has de a√±adir una nueva entrada al √≠ndice de cuestionarios de la cabecera del documento.</p>
<p>Dado que cada secci√≥n ha de tener un atributo de tipo <code class="docutils literal notranslate"><span class="pre">id</span></code> (por ejemplo, para enlazarlo desde el √≠ndice), en tu implementaci√≥n usa como valor del identificador el car√°cter ¬´c¬ª seguido del valor de una variable global que se inicializar√° a 1 y se incrementar√° tras la creaci√≥n de cada cuestionario. Date cuenta de que los cuestionarios presentes inicialmente en la p√°gina web ya tienen sus propios valores de <code class="docutils literal notranslate"><span class="pre">id</span></code>, por lo que el primer cuestionario que se cree tendr√° <code class="docutils literal notranslate"><span class="pre">c1</span></code> por <code class="docutils literal notranslate"><span class="pre">id</span></code>, el segundo <code class="docutils literal notranslate"><span class="pre">c2</span></code>, etc. El contador global nunca se decrementar√°, aunque se borre un cuestionario. Observa, tambi√©n, que la √∫nica manera de borrar un cuestionario es mediante el borrado de la √∫ltima de sus preguntas, por lo que no es posible en esta pr√°ctica borrar un cuestionario para el que no se ha introducido ninguna pregunta a√∫n.</p>
<p>Tras la creaci√≥n e inserci√≥n del nuevo elemento <code class="docutils literal notranslate"><span class="pre">&lt;section&gt;</span></code>, se proceder√° a incorporarle el formulario de creaci√≥n de preguntas mediante la oportuna llamada a <code class="docutils literal notranslate"><span class="pre">addFormPregunta</span></code>.</p>
<p>Adem√°s, la funci√≥n <code class="docutils literal notranslate"><span class="pre">addCuestionario</span></code> dejar√° en blanco el contenido de los campos del formulario.</p>
</section>
<section id="captura-de-pantalla">
<h3><span class="section-number">9.4.13. </span>Captura de pantalla<a class="headerlink" href="#captura-de-pantalla" title="Enlace permanente a este encabezado">ÔÉÅ</a></h3>
<p>Observa en <a class="reference external" href="_static/img/dai-p2-captura.png">esta imagen</a> como quedar√≠a la p√°gina web una vez a√±adidos dos cuestionarios con sendas preguntas.</p>
</section>
<section id="entrega-de-la-practica">
<h3><span class="section-number">9.4.14. </span>Entrega de la pr√°ctica<a class="headerlink" href="#entrega-de-la-practica" title="Enlace permanente a este encabezado">ÔÉÅ</a></h3>
<p>Aseg√∫rate de que tanto tus ficheros iniciales como cualquier estado posterior del DOM se validan correctamente con los validadores HTML5 y CSS del W3C. Adem√°s, usa Chrome DevTools para comprobar que el estilo aplicado en cada punto del documento es correcto y para depurar tu c√≥digo en JavaScript. Finalmente, aseg√∫rate de que tu implementaci√≥n cumple con todas las especificaciones de este enunciado.</p>
<p>Recuerda mantener tu nombre de usuario de la universidad en el pie del documento. Realiza tu entrega en un √∫nico fichero comprimido llamado <code class="docutils literal notranslate"><span class="pre">p2-dai.zip</span></code> a trav√©s del servidor web del Departamento. El archivo comprimido contendr√° directamente (sin ninguna carpeta contenedora) el fichero <code class="docutils literal notranslate"><span class="pre">index.html</span></code>, una carpeta <code class="docutils literal notranslate"><span class="pre">css</span></code> con el fichero <code class="docutils literal notranslate"><span class="pre">normal.css</span></code>, una carpeta <code class="docutils literal notranslate"><span class="pre">img</span></code> con las im√°genes de Londres y Par√≠s, y una carpeta <code class="docutils literal notranslate"><span class="pre">js</span></code> con el c√≥digo en JavaScript.</p>
<p>Por √∫ltimo, coloca en alg√∫n punto del pie de la p√°gina un fragmento de HTML como <code class="docutils literal notranslate"><span class="pre">&lt;span</span> <span class="pre">id=&quot;tiempo&quot;&gt;[10</span> <span class="pre">horas]&lt;/span&gt;</span></code> donde has de sustituir el 10 por el n√∫mero de horas aproximadas que te haya llevado hacer esta pr√°ctica.</p>
</section>
</section>
<section id="practica-3-una-aplicacion-con-acceso-a-servicios-web-de-terceros-y-con-componentes-web">
<h2><span class="section-number">9.5. </span>Pr√°ctica 3: una aplicaci√≥n con acceso a servicios web de terceros y con componentes web üñ•Ô∏è<a class="headerlink" href="#practica-3-una-aplicacion-con-acceso-a-servicios-web-de-terceros-y-con-componentes-web" title="Enlace permanente a este encabezado">ÔÉÅ</a></h2>
<p>En esta pr√°ctica ampliar√°s tu pr√°ctica anterior para integrarla con diferentes servicios web proporcionados por terceros a trav√©s de APIs; en particular, la imagen a mostrar junto al t√≠tulo de cada cuestionario ser√° tomada de alguna de las im√°genes relevantes ofrecidas por <a class="reference external" href="https://www.flickr.com/">Flickr</a>; adem√°s, cada cuestionario mostrar√° un peque√±o texto extraido de <a class="reference external" href="https://es.wikipedia.org/">Wikipedia en espa√±ol</a> sobre el tema en cuesti√≥n. En la segunda parte, crear√°s algunos componentes web para encapsular adecuadamente toda esta informaci√≥n.</p>
<p>No est√° permitido usar librer√≠as de terceros para interactuar con los distintos servicios web, sino que lo has de hacer con el API Fetch est√°ndar estudiado en clase. Tampoco est√° permitido usar librer√≠as de alto nivel para los componentes web.</p>
<section id="ejemplo-de-peticiones-get">
<h3><span class="section-number">9.5.1. </span>Ejemplo de peticiones GET<a class="headerlink" href="#ejemplo-de-peticiones-get" title="Enlace permanente a este encabezado">ÔÉÅ</a></h3>
<p>Lo siguiente es un ejemplo de la petici√≥n que has de realizar para obtener informaci√≥n sobre Par√≠s:</p>
<p><a class="reference external" href="https://es.wikipedia.org/w/api.php?origin=*&amp;format=json&amp;action=query&amp;prop=extracts&amp;exintro&amp;explaintext&amp;continue&amp;titles=par√≠s">https://es.wikipedia.org/w/api.php?origin=*&amp;format=json&amp;action=query&amp;prop=extracts&amp;exintro&amp;explaintext&amp;continue&amp;titles=par√≠s</a></p>
<p>Consulta en la <a class="reference external" href="https://www.mediawiki.org/wiki/API:Main_page/en">documentaci√≥n del API de Wikipedia</a> el prop√≥sito de cada par√°metro; la mayor parte de ellos, en cualquier caso, proviene de la <a class="reference external" href="https://www.mediawiki.org/wiki/Extension:TextExtracts">extensi√≥n TextExtracts</a>. Usa algunos ejemplos para determinar cu√°l es la propiedad de la cadena en JSON devuelta que contiene la informaci√≥n que te interesa y qu√© ocurre cuando el t√©rmino no se encuentra en la Wikipedia.</p>
<p>Por otro lado, lo siguiente es un ejemplo de la petici√≥n que has de realizar a Flickr para obtener las im√°genes m√°s relevantes de Par√≠s (es necesario indicar un valor correcto de <code class="docutils literal notranslate"><span class="pre">api_key</span></code> en lugar de <code class="docutils literal notranslate"><span class="pre">xxxxx</span></code>, seg√∫n se indica m√°s adelante):</p>
<p><a class="reference external" href="https://api.flickr.com/services/rest/?method=flickr.photos.search&amp;api_key=xxxxx&amp;text=par%C3%ADs&amp;format=json&amp;per_page=10&amp;media=photos&amp;sort=relevance&amp;nojsoncallback=1">https://api.flickr.com/services/rest/?method=flickr.photos.search&amp;api_key=xxxxx&amp;text=par%C3%ADs&amp;format=json&amp;per_page=10&amp;media=photos&amp;sort=relevance&amp;nojsoncallback=1</a></p>
<p>Consulta la <a class="reference external" href="https://www.flickr.com/services/api/">documentaci√≥n del API de Flickr</a> para entender el prop√≥sito de cada par√°metro de la llamada anterior; el resultado es una lista de im√°genes de la que nos interesa el <em>id</em> de la primera para realizar una segunda llamada que nos permita acceder a la URL de dicha imagen:</p>
<p><a class="reference external" href="https://api.flickr.com/services/rest/?method=flickr.photos.getSizes&amp;api_key=xxxxxx&amp;photo_id=13942935893&amp;format=json&amp;nojsoncallback=1">https://api.flickr.com/services/rest/?method=flickr.photos.getSizes&amp;api_key=xxxxxx&amp;photo_id=13942935893&amp;format=json&amp;nojsoncallback=1</a></p>
<p>De la lista de im√°genes devuelta por la petici√≥n anterior, te has de quedar con la primera de ellas, que corresponder√° a la versi√≥n de menor tama√±o; ten en cuenta, en cualquier caso, que tu estilo CSS seguir√° ajustando la imagen a un tama√±o concreto, como se hizo en pr√°cticas anteriores. Usa siempre en tu pr√°ctica las dos peticiones consecutivas a Flickr y no intentes componer autom√°ticamente la URL de la imagen tras la primera petici√≥n. Adem√°s, utiliza el protocolo <em>https</em> en todas las peticiones a Wikipedia y Flickr.</p>
</section>
<section id="incorporacion-de-informacion-de-la-wikipedia">
<h3><span class="section-number">9.5.2. </span>Incorporaci√≥n de informaci√≥n de la Wikipedia<a class="headerlink" href="#incorporacion-de-informacion-de-la-wikipedia" title="Enlace permanente a este encabezado">ÔÉÅ</a></h3>
<p>La petici√≥n a Wikipedia se har√° de forma as√≠ncrona tras a√±adir el formulario del cuestionario; el resultado devuelto se a√±adir√° inmediatamente antes del nodo del formulario y despu√©s del t√≠tulo del cuestionario en un <code class="docutils literal notranslate"><span class="pre">div</span></code> con clase <code class="docutils literal notranslate"><span class="pre">wiki</span></code>. Si no existe ninguna entrada en Wikipedia para el t√©rmino correspondiente, este <code class="docutils literal notranslate"><span class="pre">div</span></code> ha de incluirse pero sin contenido alguno. El estilo aplicado a los elementos de clase <code class="docutils literal notranslate"><span class="pre">wiki</span></code> utiliza un tama√±o de tipo de letra del 90%; este es el √∫nico cambio en el CSS que has de realizar por ahora.</p>
<p>Ten en cuenta que al borrar un cuestionario tambi√©n se ha de borrar ahora el texto descriptivo asociado. Muestra el contenido del atributo <code class="docutils literal notranslate"><span class="pre">extract</span></code>, cuando exista, de la clave contenida en <code class="docutils literal notranslate"><span class="pre">query.pages</span></code> (<code class="docutils literal notranslate"><span class="pre">query.pages.*.extract</span></code>).</p>
<p>Comienza modificando la funci√≥n <code class="docutils literal notranslate"><span class="pre">addFormPregunta</span></code> para que devuelva el nodo del formulario creado. A continuaci√≥n, crea una funci√≥n <code class="docutils literal notranslate"><span class="pre">addWikipedia</span></code> que reciba como par√°metros la cadena con el t√©rmino a buscar y el nodo que representa el formulario del cuestionario; esta funci√≥n utiliza el API de la Wikipedia de forma as√≠ncrona para a√±adir la descripci√≥n devuelta por la Wikipedia para el t√©rmino indicado; el punto de inserci√≥n ser√° antes del formulario cuyo nodo se ha pasado como par√°metro.</p>
<p>Aseg√∫rate de que a la vez que a√±ades los formularios a los cuestionarios existentes inicialmente (sobre Par√≠s y Londres), tambi√©n llamas a <code class="docutils literal notranslate"><span class="pre">addWikipedia</span></code> para incorporar la descripci√≥n correspondiente. Usa como t√©rmino a buscar el <code class="docutils literal notranslate"><span class="pre">id</span></code> de cada elemento <code class="docutils literal notranslate"><span class="pre">section</span></code>; para que esto funcione cambia el <code class="docutils literal notranslate"><span class="pre">id</span></code> del primer cuestionario de <code class="docutils literal notranslate"><span class="pre">paris</span></code> a <code class="docutils literal notranslate"><span class="pre">par√≠s</span></code> en el fichero HTML (HTML5 permite casi cualquier car√°cter como valor de un atributo <em>id</em> por lo que puedes utiliza caracteres acentuados sin problema). <em>Nota:</em> para los cuestionarios a√±adidos din√°micamente no usar√°s el <em>id</em>, ya que este tendr√° la forma <em>c1</em>, <em>c2</em>, etc., sino que usar√°s el tema obtenido del formulario de inserci√≥n.</p>
<p>No olvides a√±adir la correspondiente llamada a <code class="docutils literal notranslate"><span class="pre">addWikipedia</span></code> a la funci√≥n <code class="docutils literal notranslate"><span class="pre">addCuestionario</span></code>.</p>
<p>Usa una <a class="reference external" href="https://www.tutorialrepublic.com/javascript-tutorial/javascript-regular-expressions.php">expresi√≥n regular</a> y el m√©todo <code class="docutils literal notranslate"><span class="pre">replace</span></code> aplicado a cadenas de JavaScript para eliminar todos los n√∫meros entre corchetes (incluyendo los corchetes) del resultado devuelto por la Wikipedia.</p>
</section>
<section id="incorporacion-de-la-informacion-de-flickr">
<h3><span class="section-number">9.5.3. </span>Incorporaci√≥n de la informaci√≥n de Flickr<a class="headerlink" href="#incorporacion-de-la-informacion-de-flickr" title="Enlace permanente a este encabezado">ÔÉÅ</a></h3>
<p>Cr√©ate en primer lugar un usuario en <a class="reference external" href="https://www.flickr.com/">Flickr</a> y accede al <a class="reference external" href="https://www.flickr.com/services/api/misc.api_keys.html">apartado de desarrolladores</a> para obtener una clave (<em>API key</em>) que usar en el par√°metro <code class="docutils literal notranslate"><span class="pre">api_key</span></code> de la petici√≥n.</p>
<p>Sigue unos pasos similares a los del texto de la Wikipedia, pero ahora con la imagen. Crea una funci√≥n <code class="docutils literal notranslate"><span class="pre">addFlickr</span></code> que reciba como par√°metros la cadena con el t√©rmino a buscar y el nodo que representa la imagen del cuestionario; esta funci√≥n utiliza el API de Flickr de forma as√≠ncrona para colocar (como valor del atributo <code class="docutils literal notranslate"><span class="pre">src</span></code>) en el nodo recibido como par√°metro la primera imagen devuelta por Flickr para el t√©rmino correspondiente seg√∫n se ha indicado anteriormente. En caso de que no exista ninguna imagen para dicho t√©rmino, la imagen a mostrar ha de ser <a class="reference external" href="http://eoimages.gsfc.nasa.gov/images/imagerecords/57000/57723/globe_east_540.jpg">esta del planeta Tierra</a>.</p>
<p>Aseg√∫rate de que a la vez que a√±ades los formularios y la descripci√≥n de la Wikipedia a los cuestionarios existentes inicialmente (sobre Par√≠s y Londres), tambi√©n llamas a <code class="docutils literal notranslate"><span class="pre">addFlickr</span></code> para incorporar la imagen correspondiente, que sustituir√° a la mostrada inicialmente. Usa de nuevo como t√©rmino a buscar el <code class="docutils literal notranslate"><span class="pre">id</span></code> de cada elemento <code class="docutils literal notranslate"><span class="pre">section</span></code>.</p>
<p>Finalmente, a√±ade la correspondiente llamada a <code class="docutils literal notranslate"><span class="pre">addFlickr</span></code> a la funci√≥n <code class="docutils literal notranslate"><span class="pre">addCuestionario</span></code> y comprueba que se a√±ade correctamente una nueva imagen con cada nuevo cuestionario. Elimina el campo del formulario de nuevo cuestionario que permit√≠a indicar la URL de la imagen a incluir (borra el elemento <code class="docutils literal notranslate"><span class="pre">li</span></code> correspondiente), ya que ya no es necesario; aseg√∫rate tambi√©n de que no queda rastro de √©l en el c√≥digo JavaScript.</p>
</section>
<section id="creacion-de-los-componentes-web">
<h3><span class="section-number">9.5.4. </span>Creaci√≥n de los componentes web<a class="headerlink" href="#creacion-de-los-componentes-web" title="Enlace permanente a este encabezado">ÔÉÅ</a></h3>
<p>En esta parte final de la pr√°ctica has de crear un componente web que muestre el encabezado de cada cuestionario. Este componente web sustituir√° al actual bloque de HTML que contiene el t√≠tulo, la imagen y la descripci√≥n de cada cuestionario, de manera que en lugar de introducirlo con un c√≥digo similar a este (y con el correspondiente c√≥digo de JavaScript):</p>
<div class="highlight-html notranslate"><div class="highlight"><pre><span></span><span class="p">&lt;</span><span class="nt">section</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;par√≠s&quot;</span><span class="p">&gt;</span>

<span class="p">&lt;</span><span class="nt">h2</span><span class="p">&gt;&lt;</span><span class="nt">img</span> <span class="na">src</span><span class="o">=</span><span class="s">&quot;...&quot;</span> <span class="na">alt</span><span class="o">=</span><span class="s">&quot;...&quot;</span><span class="p">&gt;</span>Cuestionario sobre Par√≠s<span class="p">&lt;/</span><span class="nt">h2</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;wiki&quot;</span><span class="p">&gt;</span>...<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</pre></div>
</div>
<p>bastar√° con hacer:</p>
<div class="highlight-html notranslate"><div class="highlight"><pre><span></span><span class="p">&lt;</span><span class="nt">section</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;par√≠s&quot;</span><span class="p">&gt;</span>

<span class="p">&lt;</span><span class="nt">encabezado-cuestionario</span> <span class="na">data-tema</span><span class="o">=</span><span class="s">&quot;Par√≠s&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">encabezado-cuestionario</span><span class="p">&gt;</span>
</pre></div>
</div>
<p>Si repasas bien los contenidos sobre componentes web estudiados en clase, no te deber√≠a costar mucho implementar el componente web en un fichero <code class="docutils literal notranslate"><span class="pre">encabezado-cuestionario.js</span></code>. Ve definiendo el componente sin eliminar hasta el final el c√≥digo que ya ten√≠as. Ten en cuenta los siguientes detalles:</p>
<ul class="simple">
<li><p>Los estilos de <code class="docutils literal notranslate"><span class="pre">h2</span></code>, <code class="docutils literal notranslate"><span class="pre">img</span></code> y <code class="docutils literal notranslate"><span class="pre">wiki</span></code> se han de eliminar del CSS global y a√±adirlos al estilo del componente <code class="docutils literal notranslate"><span class="pre">encabezado-cuestionario</span></code>.</p></li>
<li><p>Gran parte del c√≥digo necesario para interactuar con los servicios web de Flickr y Wikipedia lo puedes tomar de las funciones <code class="docutils literal notranslate"><span class="pre">addFlickr</span></code> y <code class="docutils literal notranslate"><span class="pre">addWikipedia</span></code> que ya ten√≠as definidas, aunque los elementos que creaban estas funciones se a√±ad√≠an al DOM y ahora se a√±adir√°n al <em>shadow DOM</em>.</p></li>
<li><p>Intenta, en principio, conseguir que algo como:</p></li>
</ul>
<div class="highlight-html notranslate"><div class="highlight"><pre><span></span><span class="p">&lt;</span><span class="nt">encabezado-cuestionario</span> <span class="na">data-tema</span><span class="o">=</span><span class="s">&quot;Berl√≠n&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">encabezado-cuestionario</span><span class="p">&gt;</span>
</pre></div>
</div>
<p>funcione en <code class="docutils literal notranslate"><span class="pre">index.html</span></code>. Cuando lo consigas, sustituye el encabezado de los cuestionarios iniciales existentes en <code class="docutils literal notranslate"><span class="pre">index.html</span></code> por el uso del elemento personalizado <code class="docutils literal notranslate"><span class="pre">encabezado-cuestionario</span></code>. Ya no es necesario, tampoco, tener que a√±adir el texto de la Wikipedia o la imagen de Flickr a los cuestionarios preexistentes mediante c√≥digo expl√≠cito en JavaScript, sino que el nuevo elemento se encargar√° de ello.</p>
<ul class="simple">
<li><p>Repasa el tema de componentes web visto en clase antes de comenzar a escribir los componentes web. Pon el c√≥digo en JavaScript que se encarga de acceder a los servicios de Flickr y Wikipedia en la funci√≥n <code class="docutils literal notranslate"><span class="pre">connectedCallback</span></code> de la clase correspondiente y no en el constructor. Pon tambi√©n en <code class="docutils literal notranslate"><span class="pre">connectedCallback</span></code> el acceso al atributo <code class="docutils literal notranslate"><span class="pre">data-tema</span></code>.</p></li>
<li><p>Aseg√∫rate tambi√©n de que tu componente web se actualiza correctamente ante cambios din√°micos en el valor del atributo <code class="docutils literal notranslate"><span class="pre">data-tema</span></code>.</p></li>
<li><p>Ten en cuenta a qu√© apunta <code class="docutils literal notranslate"><span class="pre">this</span></code> en cada momento; tu c√≥digo del interior del m√©todo <code class="docutils literal notranslate"><span class="pre">then</span></code> asociado a una promesa <code class="docutils literal notranslate"><span class="pre">fetch</span></code> se ejecutar√° (cuando el servidor devuelva su respuesta) de forma as√≠ncrona fuera del contexto del componente web; en ese caso, <code class="docutils literal notranslate"><span class="pre">this</span></code> no estar√° apuntando al componente web, por lo que para acceder a sus propiedades tendr√°s que o bien usar funciones flecha o bien utilizar correctamente una clausura:</p></li>
</ul>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="nx">connectedCallback</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="linenos">2</span><span class="w">  </span><span class="kd">var</span><span class="w"> </span><span class="nx">componente</span><span class="o">=</span><span class="w"> </span><span class="k">this</span><span class="p">;</span><span class="w">  </span><span class="c1">// aqu√≠ this apunta al shadow host del componente web</span>
<span class="linenos">3</span><span class="w">  </span><span class="nx">fetch</span><span class="p">(...)</span>
<span class="linenos">4</span><span class="w">  </span><span class="p">.</span><span class="nx">then</span><span class="p">(...)</span>
<span class="linenos">5</span><span class="w">  </span><span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="linenos">6</span><span class="w">    </span><span class="nx">componente</span><span class="p">.</span><span class="nx">shadowRoot</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(...).</span><span class="nx">textContent</span><span class="o">=</span><span class="w"> </span><span class="p">...;</span>
<span class="linenos">7</span><span class="w">  </span><span class="p">})</span>
<span class="linenos">8</span><span class="w">  </span><span class="p">...</span>
<span class="linenos">9</span><span class="p">}</span>
</pre></div>
</div>
<ul class="simple">
<li><p>Para terminar, puedes eliminar tambi√©n las antiguas <code class="docutils literal notranslate"><span class="pre">addFlickr</span></code> y <code class="docutils literal notranslate"><span class="pre">addWikipedia</span></code> del c√≥digo de JavaScript, as√≠ como sustituir su uso cuando se crean nuevos cuestionarios por c√≥digo que se encargue de la inserci√≥n oportuna del componente web.</p></li>
</ul>
</section>
<section id="id3">
<h3><span class="section-number">9.5.5. </span>Captura de pantalla<a class="headerlink" href="#id3" title="Enlace permanente a este encabezado">ÔÉÅ</a></h3>
<p>Observa <a class="reference external" href="_static/img/dai-p3-captura.png">en una imagen</a> c√≥mo quedar√≠a la p√°gina web una vez a√±adidos dos cuestionarios y algunas preguntas. Ten en cuenta que el texto descriptivo o las im√°genes podr√≠an no corresponderse exactamente con las que los servicios web de Wikipedia o Flickr ofrezcan en el momento en que pruebes tu pr√°ctica; en la imagen, adem√°s, no se han eliminado los n√∫meros entre corchetes.</p>
</section>
<section id="id4">
<h3><span class="section-number">9.5.6. </span>Entrega de la pr√°ctica<a class="headerlink" href="#id4" title="Enlace permanente a este encabezado">ÔÉÅ</a></h3>
<p>Aseg√∫rate de que tanto tus ficheros iniciales como cualquier estado posterior del DOM se validan correctamente con los validadores HTML5 y CSS del W3C con excepci√≥n de los elementos personalizados, que posiblemente generen alg√∫n tipo de error. Adem√°s, usa Chrome Developer Tools o Firebug para comprobar que el estilo aplicado en cada punto del documento es correcto y para depurar tu c√≥digo en JavaScript.</p>
<p>Nota: recuerda mantener un tu identificador de usuario en el pie del documento. Realiza tu entrega en un √∫nico fichero comprimido llamado <code class="docutils literal notranslate"><span class="pre">p3-dai.zip</span></code> a trav√©s del <cite>servidor web del Departamento</cite>. El archivo comprimido contendr√° directamente (sin ninguna carpeta contenedora) el fichero <code class="docutils literal notranslate"><span class="pre">index.html</span></code>, una carpeta <code class="docutils literal notranslate"><span class="pre">css</span></code> con el fichero <code class="docutils literal notranslate"><span class="pre">normal.css</span></code> y una carpeta <code class="docutils literal notranslate"><span class="pre">js</span></code> con el c√≥digo en JavaScript.</p>
<p>Por √∫ltimo, coloca en alg√∫n punto del pie de la p√°gina un fragmento de HTML como <code class="docutils literal notranslate"><span class="pre">&lt;span</span> <span class="pre">id=&quot;tiempo&quot;&gt;[10</span> <span class="pre">horas]&lt;/span&gt;</span></code> donde has de sustituir el 10 por el n√∫mero de horas aproximadas que te haya llevado hacer esta pr√°ctica.</p>
</section>
</section>
<section id="practica-4-una-aplicacion-en-la-nube">
<h2><span class="section-number">9.6. </span>Pr√°ctica 4: una aplicaci√≥n en la nube üñ•Ô∏è<a class="headerlink" href="#practica-4-una-aplicacion-en-la-nube" title="Enlace permanente a este encabezado">ÔÉÅ</a></h2>
<p>Esta pr√°ctica tiene dos partes. En la primera parte vas a ampliar la pr√°ctica anterior, que solo ten√≠a <em>front-end</em>, para a√±adirle un <em>back-end</em> que d√© persistencia a la aplicaci√≥n y permita gestionar una base de datos con la informaci√≥n de los cuestionarios. La aplicaci√≥n resultante se implantar√° en la plataforma Google App Engine y los datos se almacenar√°n en una base de datos MySQL alojada en el servicio Google Cloud SQL, de manera muy similar a la aplicaci√≥n del carrito que has estudiado en clase. Como en pr√°cticas anteriores, no puedes usar ninguna librer√≠a, como jQuery o Angular, en la parte del cliente, con excepci√≥n de la librer√≠a para integrar Google Sign-in que se usar√° en la segunda parte de la pr√°ctica.</p>
<p>La primera parte permitir√° obtener un 8 como nota m√°xima de la pr√°ctica. Los dos puntos restantes corresponden a la segunda parte, que no es obligatorio que implementes ni para la entrega de esta pr√°ctica ni para el examen de pr√°cticas, ya que el enunciado del examen supondr√° que no ha sido implementada. En la segunda parte de la pr√°ctica vas a permitir que el usuario se identifique mediante su cuenta de Google de forma que los cuestionarios tendr√°n un usuario asociado en la base de datos; los cuestionarios y preguntas de un usuario no podr√°n ser vistos por el resto de usuarios.</p>
<p>Cuando el usuario entre en la aplicaci√≥n, se le mostrar√° el formulario para insertar nuevos cuestionarios; inicialmente no habr√° ning√∫n cuestionario creado y, por tanto, ya no aparecer√°n los cuestionarios de Par√≠s ni Londres. La aplicaci√≥n funcionar√° como una <em>aplicaci√≥n de una √∫nica p√°gina</em> (en ingl√©s, <em>SPA</em> por <em>single-page application</em>): cada vez que el usuario introduzca o elimine datos, los cuestionarios se actualizar√°n convenientemente en la p√°gina como hasta ahora, pero tambi√©n lo har√°n en la base de datos del servidor.</p>
<p>Como en el ejemplo del carrito visto en clase, el c√≥digo del servidor estar√° escrito con Node.js y Express, y funcionar√° con una base de datos SQLite mientras se ejecute localmente y con MySQL cuando se ejecute desde Google App Engine. Al usar Knex.js, la mayor parte del c√≥digo para ambas opciones ser√° el mismo, como vimos en la aplicaci√≥n del carrito. Asimismo, la aplicaci√≥n ser√° la encargada de crear el esquema de la base de datos si las tablas no existen.</p>
<section id="comprobacion-de-la-aplicacion-del-carrito">
<h3><span class="section-number">9.6.1. </span>Comprobaci√≥n de la aplicaci√≥n del carrito<a class="headerlink" href="#comprobacion-de-la-aplicacion-del-carrito" title="Enlace permanente a este encabezado">ÔÉÅ</a></h3>
<p>Comienza asegur√°ndote de que entiendes c√≥mo funciona la apicaci√≥n del carrito vista en clase y que eres capaz de ejecutarla localmente en <code class="docutils literal notranslate"><span class="pre">localhost</span></code> y en la nube de Google App Engine. Recuerda que las instrucciones sobre c√≥mo configurar el entorno de trabajo y lanzar la aplicaci√≥n tanto en modo local como en la nube se dieron en las secciones ¬´<a class="reference internal" href="rest.html#label-local"><span class="std std-ref">Configuraci√≥n del entorno de trabajo para ejecutar localmente una aplicaci√≥n web</span></a>¬ª, ¬´<a class="reference internal" href="nube.html#label-gcloud"><span class="std std-ref">Configuraci√≥n del entorno de trabajo para Google Cloud Platform</span></a>¬ª y ¬´<a class="reference internal" href="nube.html#label-appengine"><span class="std std-ref">Publicaci√≥n avanzada de la aplicaci√≥n del carrito en Google App Engine integrada con Google Cloud SQL</span></a>¬ª.</p>
<div class="admonition important">
<p class="admonition-title">Importante</p>
<p>Recuerda que en Linux puedes instalar todo el software necesario r√°pidamente con ayuda del fichero <a class="reference external" href="https://www.dlsi.ua.es/~japerez/cursos/dai/dai-bundle-dev-20211005.tar.gz">dai-bundle-dev</a>: desc√°rgalo, descompr√≠melo, edita y luego ejecuta el script <code class="docutils literal notranslate"><span class="pre">install.sh</span></code>.</p>
</div>
</section>
<section id="incorporacion-e-implantacion-de-la-aplicacion-de-la-practica-anterior">
<h3><span class="section-number">9.6.2. </span>Incorporaci√≥n e implantaci√≥n de la aplicaci√≥n de la pr√°ctica anterior<a class="headerlink" href="#incorporacion-e-implantacion-de-la-aplicacion-de-la-practica-anterior" title="Enlace permanente a este encabezado">ÔÉÅ</a></h3>
<p>A√±ade ahora en la carpeta adecuada de la aplicaci√≥n del carrito, los ficheros de tu pr√°ctica 3 de forma que <em>index.html</em> est√© alojado donde corresponda y el resto de elementos de tu aplicaci√≥n mantengan su estructura relativa. Lanza la aplicaci√≥n en modo local y comprueba que funciona correctamente. A continuaci√≥n, implanta tu aplicaci√≥n en la nube de Google App Engine y comprueba que, de nuevo, sigue funcionando correctamente.</p>
<div class="admonition note">
<p class="admonition-title">Nota</p>
<p>El √∫nico cambio que quiz√°s tengas que hacer para que tu aplicaci√≥n funcione en la nube de Google vendr√≠a dado porque a la hora de indicar los tipos de letra de Google Fonts o las direcciones de acceso a las APIs de Wikipedia o Flickr hubieras usado el protocolo <em>http</em> en lugar de <em>https</em>; en ese caso, tendr√≠as que cambiarlo ahora ya que a las aplicaciones de Google App Engine se accede mediante <em>https</em> y desde una p√°gina descargada de forma segura no es posible referenciar recursos con URLs no seguras.</p>
</div>
<p>Como la p√°gina ya no contiene inicialmente ning√∫n cuestionario, puedes borrar de la funci√≥n <em>init</em> el c√≥digo que se encargaba de a√±adir a cada uno de los cuestionarios existentes la cruz de borrado y el formulario de inserci√≥n de preguntas.</p>
</section>
<section id="caracteristicas-comunes-de-los-servicios-web-a-implementar">
<h3><span class="section-number">9.6.3. </span>Caracter√≠sticas comunes de los servicios web a implementar<a class="headerlink" href="#caracteristicas-comunes-de-los-servicios-web-a-implementar" title="Enlace permanente a este encabezado">ÔÉÅ</a></h3>
<p>Los servicios web a implementar ser√°n de tipo GET, POST o DELETE seg√∫n su cometido y recibir√°n la informaci√≥n y la devolver√°n en formato JSON. La respuesta del servidor siempre seguir√° el siguiente formato:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span><span class="s2">&quot;result&quot;</span><span class="p">:</span><span class="o">...</span><span class="p">,</span><span class="s2">&quot;error&quot;</span><span class="p">:</span><span class="o">...</span><span class="p">}</span>
</pre></div>
</div>
<p>Cuando la petici√≥n se haya podido atender correctamente, el atributo <code class="docutils literal notranslate"><span class="pre">result</span></code> contendr√° la informaci√≥n relevante que haya que devolver al cliente y el atributo <code class="docutils literal notranslate"><span class="pre">error</span></code> valdr√° <code class="docutils literal notranslate"><span class="pre">null</span></code>; el c√≥digo de estado HTTP devuelto en este caso ser√° 200. Por otro lado, si alg√∫n problema impide en tu c√≥digo atender correctamente la solicitud (por ejemplo, se intenta eliminar un cuestionario inexistente), la respuesta del servidor contendr√° la informaci√≥n adecuada en el atributo <code class="docutils literal notranslate"><span class="pre">error</span></code> y el atributo <code class="docutils literal notranslate"><span class="pre">result</span></code> valdr√† <code class="docutils literal notranslate"><span class="pre">null</span></code>; el c√≥digo de estado devuelto en este caso ser√° 404. Una situaci√≥n t√≠pica de error que has de controlar es que los par√°metros esperados de cada servicio web sean incorrectos o no existan.</p>
<p>Cada vez que en el c√≥digo de JavaScript realices una petici√≥n Fetch a uno de los servicios del <em>back-end</em>, tendr√°s que comprobar si el JSON devuelto contiene un valor distinto de <code class="docutils literal notranslate"><span class="pre">null</span></code> en la propiedad <code class="docutils literal notranslate"><span class="pre">error</span></code>; en ese caso, la aplicaci√≥n mostrar√° una ventana de alerta (funci√≥n <code class="docutils literal notranslate"><span class="pre">alert</span></code>) con un error informativo seguido del contenido de <code class="docutils literal notranslate"><span class="pre">error</span></code>; adem√°s, todas tus peticiones Fetch definir√°n una funci√≥n que muestre una ventana de alerta similar ante el resto de posibles situaciones de error (por ejemplo, no se puede establecer la conexi√≥n con el servidor).</p>
<p>Ninguna de las acciones que se tengan que efectuar sobre la p√°gina actual del navegador como consecuencia de una acci√≥n de inserci√≥n o borrado por parte del usuario se llevar√°n a cabo si el servidor devuelve un error (por ejemplo, no se a√±adir√° un cuestionario a la p√°gina actual si el servidor no informa de que lo ha a√±adido con √©xito a la base de datos). Ante estas situaciones de error, como ya se ha comentado, habr√°, adem√°s, que mostrar una ventana de alerta.</p>
</section>
<section id="almacenamiento-de-los-cuestionarios">
<h3><span class="section-number">9.6.4. </span>Almacenamiento de los cuestionarios<a class="headerlink" href="#almacenamiento-de-los-cuestionarios" title="Enlace permanente a este encabezado">ÔÉÅ</a></h3>
<p>En esta pr√°ctica crear√°s servicios web siguiendo el patr√≥n REST para lo siguiente:</p>
<ul class="simple">
<li><p>a√±adir un tema de cuestionario (POST) y devolver el id asignado en la base de datos;</p></li>
<li><p>recuperar todos los temas (GET);</p></li>
<li><p>borrar un tema a partir de su id y todas sus preguntas (DELETE);</p></li>
<li><p>a√±adir una pregunta y su correspondiente respuesta a un cuestionario dado el id del tema (POST) y devolver el id de la pregunta en la base de datos;</p></li>
<li><p>obtener todas las preguntas y respuestas dado el id del tema (GET);</p></li>
<li><p>borrar una pregunta dado su id (DELETE).</p></li>
</ul>
<p>Usa URLs con patrones similares a los de la aplicaci√≥n del carrito del tema de servicios web.</p>
</section>
<section id="representacion-de-los-datos-en-la-base-de-datos">
<h3><span class="section-number">9.6.5. </span>Representaci√≥n de los datos en la base de datos<a class="headerlink" href="#representacion-de-los-datos-en-la-base-de-datos" title="Enlace permanente a este encabezado">ÔÉÅ</a></h3>
<p>La base de datos contendr√° una tabla para representar los cuestionarios y otra para representar las preguntas. Cada cuestionario vendr√° representado por un identificador √∫nico generado autom√°ticamente (clave primaria) y su tema. Cada pregunta vendr√° representada por un identificador √∫nico (clave primaria), el identificador de su tema (clave ajena), el texto de la pregunta y su respuesta correcta.</p>
<p>Con√©ctate tanto a la base de datos SQLite (cuando pruebes la aplicaci√≥n en local) como a MySQL (en Google App Engine) para comprobar que las tablas se est√°n rellenando o actualizando correctamente tras cada llamada a un servicio web.</p>
<p>Crea atributos nuevos en el c√≥digo HTML generado (recuerda que han de comenzar por el prefijo <code class="docutils literal notranslate"><span class="pre">data-</span></code>) para guardar para cada cuestionario y pregunta sus identificadores en la base de datos; de esta manera, resultar√° sencillo poder indicarle al servidor que, por ejemplo, borre un determinado cuestionario o una determinada pregunta.</p>
</section>
<section id="gestion-de-los-temas-de-los-cuestionarios">
<h3><span class="section-number">9.6.6. </span>Gesti√≥n de los temas de los cuestionarios<a class="headerlink" href="#gestion-de-los-temas-de-los-cuestionarios" title="Enlace permanente a este encabezado">ÔÉÅ</a></h3>
<p>Comienza creando un servicio web que a√±ada un nuevo tema a la base de datos. Como ya se ha comentado, el cuestionario solo se a√±ade a la p√°gina actual si la respuesta del servicio es positiva; en otro caso, la solicitud del usuario de crear un nuevo cuestionario no tiene efecto sobre la p√°gina del navegador. Este servicio no permite tener m√°s de un cuestionario con el mismo tema. Si, por ejemplo, ya existiera un cuestionario sobre Lugano en la base de datos, la respuesta ser√≠a (tu mensaje de error no ha de coincidir necesariamente):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span> <span class="s2">&quot;result&quot;</span><span class="p">:</span><span class="n">null</span><span class="p">,</span><span class="s2">&quot;error&quot;</span><span class="p">:</span><span class="s2">&quot;el tema Lugano ya existe en la base de datos&quot;</span><span class="p">}</span>
</pre></div>
</div>
<p>A continuaci√≥n, crea un servicio web que elimine de la base de datos un tema. Despu√©s, modifica el c√≥digo JavaScript del cliente para que invoque este servicio cuando proceda borrar un cuestionario. El cuestionario solo se elimina de la p√°gina actual si la respuesta del servicio es positiva. A diferencia de pr√°cticas anteriores, por tanto, en esta es posible que al borrar la √∫ltima pregunta de un cuestionario, este no desaparezca; esto puede ocurrir ya que la pregunta se borra en primer lugar y, una vez borrada, se ha de proceder a intentar borrar el cuestionario que la inclu√≠a; si este √∫ltimo borrado falla, la pregunta eliminada no se recupera. El servicio devolver√° en la respuesta en JSON un error si el identificador del tema indicado en los datos de la petici√≥n no existe en la base de datos.</p>
<p>Ahora crea un servicio que liste los temas disponibles en la base de datos. A√±ade el c√≥digo necesario para invocar el nuevo servicio desde la funci√≥n <em>init</em> de forma que se muestren los encabezados (y los formularios de inserci√≥n de preguntas) de los cuestionarios almacenados en la base de datos al cargar la aplicaci√≥n. Observa que gran parte del c√≥digo para lo anterior ya existe en la funci√≥n <em>addCuestionario</em>, por lo que te puede interesar refactorizar y crear una nueva funci√≥n con el c√≥digo com√∫n. Asimismo, observa, que el identificador (<em>c1</em>, <em>c2</em>, etc.) asignado inicialmente a un cuestionario no tiene por qu√© mantenerse en la nueva aplicaci√≥n.</p>
<p>En estos momentos, tu aplicaci√≥n ha de permitir crear nuevos formularios y a√±adirles preguntas. Los temas de los formularios se almacenan ya correctamente en la base de datos, por lo que, aunque se cierre la ventana de la aplicaci√≥n, esta informaci√≥n se vuelve a mostrar al abrirla de nuevo. Las preguntas, sin embargo, se pierden si se recarga la aplicaci√≥n; en el apartado siguiente vas a solucionarlo.</p>
</section>
<section id="gestion-de-las-preguntas-de-los-cuestionarios">
<h3><span class="section-number">9.6.7. </span>Gesti√≥n de las preguntas de los cuestionarios<a class="headerlink" href="#gestion-de-las-preguntas-de-los-cuestionarios" title="Enlace permanente a este encabezado">ÔÉÅ</a></h3>
<p>De forma an√°loga a como has hecho con los cuestionarios, vas a crear tres servicios web que permitan a√±adir, borrar y listar las preguntas asociadas a un cuestionario. Al igual que con los cuestionarios, no ser√° posible a√±adir a la base de datos dos preguntas con el mismo enunciado para un tema concreto. Los posibles errores a detectar y las respuestas de los servicios son an√°logas a las del caso de los cuestionarios</p>
<p>Comprueba que tu aplicaci√≥n permite crear y eliminar tanto cuestionarios como preguntas y que los datos persisten correctamente aun cuando se recarga la aplicaci√≥n.</p>
</section>
<section id="autenticacion-de-usuarios">
<h3><span class="section-number">9.6.8. </span>Autenticaci√≥n de usuarios<a class="headerlink" href="#autenticacion-de-usuarios" title="Enlace permanente a este encabezado">ÔÉÅ</a></h3>
<p>En la segunda parte de la pr√°ctica (opcional, como se ha comentado m√°s arriba), vas a permitir que los usuarios se identifiquen en la aplicaci√≥n con su cuenta de Google usando la API de Google Sign-in como en el ejemplo de c√≥digo explorado en la actividad <a class="reference internal" href="rest.html#label-signin"><span class="std std-ref">Autenticaci√≥n de usuarios</span></a>. A√±ade los botones para identificarse y para salir de la aplicaci√≥n como en dicho c√≥digo. Mientras no haya un usuario logueado, la aplicaci√≥n funcionar√° como hasta ahora; de esta forma seguir√° funcionando en modo local incluso si no hay conexi√≥n a internet (por ejemplo, durante el examen). Cuando un usuario se identifique, los cuestionarios y preguntas que no le pertenecen se borrar√°n de la p√°gina web (pero no de la base de datos) y se cargar√°n los cuestionarios y preguntas que el usuario pudiera haber creado en una sesi√≥n anterior. Igualmente, cuando el usuario abandone la aplicaci√≥n, sus cuestionarios y preguntas se borrar√°n de la p√°gina web (pero no de la base de datos) y se cargar√°n los cuestionarios y preguntas no vinculados a un usuario concreto.</p>
<p>Aseg√∫rate de que el sistema de autenticaci√≥n de usuarios tambi√©n funciona cuando la aplicaci√≥n se despliega en Google App Engine.</p>
</section>
<section id="id5">
<h3><span class="section-number">9.6.9. </span>Entrega de la pr√°ctica<a class="headerlink" href="#id5" title="Enlace permanente a este encabezado">ÔÉÅ</a></h3>
<p>Aseg√∫rate de que tanto tus ficheros iniciales como cualquier estado posterior del DOM se validan correctamente con los validadores HTML5 y CSS del W3C con excepci√≥n de los elementos personalizados, que posiblemente generen alg√∫n tipo de error. Adem√°s, usa Chrome Developer Tools o Firebug para comprobar que el estilo aplicado en cada punto del documento es correcto y para depurar tu c√≥digo en JavaScript del lado del cliente; usa Visual Studio Code para depurar el c√≥digo de Node.js de la parte del servidor.</p>
<p><em>Nota:</em> recuerda mantener tu identificador de usuario en el pie del documento. Realiza tu entrega en un √∫nico fichero comprimido llamado <code class="docutils literal notranslate"><span class="pre">p4-dai.zip</span></code> a trav√©s del <a class="reference external" href="https://pracdlsi.dlsi.ua.es/index.cgi?id=val">servidor web del Departamento</a>. El archivo comprimido contendr√° directamente (sin ninguna carpeta contenedora) el fichero <code class="docutils literal notranslate"><span class="pre">app.js</span></code>, los otros ficheros del servidor y las carpetas que sean necesarias. Aseg√∫rate de borrar la carpeta <code class="docutils literal notranslate"><span class="pre">node_modules</span></code> antes de crear el <em>zip</em> para que su contenido no se incluya en el fichero generado y evitar as√≠ que la pr√°ctica que entregues tenga m√°s tama√±o del necesario.</p>
<p>Sube tu aplicaci√≥n a Google App Engine e incluye en el pie de p√°gina de tu aplicaci√≥n un enlace al URL correspondiente en <code class="docutils literal notranslate"><span class="pre">appspot.com</span></code>. Tu pr√°ctica ser√° corregida descomprimiendo el fichero <em>zip</em>, haciendo:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">npm</span> <span class="n">install</span>
<span class="n">npm</span> <span class="n">start</span>
</pre></div>
</div>
<p>y accediendo al URL correspondiente en <code class="docutils literal notranslate"><span class="pre">localhost</span></code>. Tambi√©n se evaluar√° usando el enlace a la aplicaci√≥n en Google App Engine suministrado a pie de p√°gina, despertando previamente si procede la instancia de la base de datos de Google Cloud SQL.</p>
<p>Por √∫ltimo, coloca en alg√∫n punto del pie de la p√°gina un fragmento de HTML como <code class="docutils literal notranslate"><span class="pre">&lt;span</span> <span class="pre">id=&quot;tiempo&quot;&gt;[10</span> <span class="pre">horas]&lt;/span&gt;</span></code> donde has de sustituir el 10 por el n√∫mero de horas aproximadas que te haya llevado hacer esta pr√°ctica.</p>
</section>
</section>
<section id="apendice-ejemplos-de-posibles-ejercicios-para-el-examen-practico">
<span id="label-ampliaciones"></span><h2><span class="section-number">9.7. </span>AP√âNDICE: Ejemplos de posibles ejercicios para el examen pr√°ctico<a class="headerlink" href="#apendice-ejemplos-de-posibles-ejercicios-para-el-examen-practico" title="Enlace permanente a este encabezado">ÔÉÅ</a></h2>
<p>Este apartado muestra algunos ejemplos de posibles ejercicios para el examen pr√°ctico. Un examen t√≠pico incluir√≠a solo uno de ellos, pero ser√≠a posible tambi√©n que hubiera dos o m√°s ejercicios de menor complejidad. El tiempo de realizaci√≥n del examen suele estar en torno a los 110 minutos. No podr√°s hacer estos ejercicios hasta que hayas acabado la pr√°ctica 4, ya que se basan en ella. Ejercicios adicionales con los que podr√≠as practicar son:</p>
<ul class="simple">
<li><p>permitir hacer un cuestionario <em>p√∫blico</em> de forma que pueda consultarse a trav√©s de una URL propia;</p></li>
<li><p>permitir que un cuestionario pueda borrarse sin necesidad de borrar anteriormente todas sus preguntas;</p></li>
<li><p>permitir que los cuestionarios o las preguntas puedan moverse <em>arriba o abajo</em> en la ventana de la aplicaci√≥n para ponerlos en un orden concreto;</p></li>
<li><p>permitir que las preguntas puedan editarse;</p></li>
<li><p>permitir que la aplicaci√≥n use otros servicios web de terceros; posiblemente se te ocurran ideas cuando repases esta <a class="reference external" href="https://github.com/toddmotto/public-apis">lista de APIs p√∫blicas</a>;</p></li>
<li><p>cualquier otra modificaci√≥n de complejidad similar que se te pueda ocurrir; insp√≠rate para ello en las aplicaciones web que usas, especialmente en aquellas que se basan en gestionar <em>listas de listas</em>.</p></li>
</ul>
<section id="colapsar-los-enunciados-de-las-preguntas">
<h3><span class="section-number">9.7.1. </span>Colapsar los enunciados de las preguntas<a class="headerlink" href="#colapsar-los-enunciados-de-las-preguntas" title="Enlace permanente a este encabezado">ÔÉÅ</a></h3>
<p>Modifica tu pr√°ctica 4 para que junto al t√≠tulo de cada cuestionario aparezca un elemento (un bot√≥n, por ejemplo) que permita colapsar o expandir la lista de preguntas asociadas a dicho cuestionario. Mientras la lista de preguntas est√© colapsada, las preguntas no se mostrar√°n en pantalla, ni siquiera cuando se a√±ada una nueva pregunta al cuestionario correspondiente. Cuando la lista de preguntas est√© expandida, el comportamiento de la aplicaci√≥n ser√° similar al actual.</p>
<p>El estado colapsado/expandido de un cuestionario se almacenar√° en la base de datos y se mantendr√° aunque la aplicaci√≥n se recargue. Al crear un nuevo cuestionario, este estar√° por defecto expandido.</p>
<p>Para obtener la m√°xima nota ser√° necesario, adem√°s, que cuando el cuestionario est√© colapsado se indique el n√∫mero de preguntas ocultas existentes.</p>
<p>Lo siguiente son algunos consejos relativos a la implementaci√≥n que no es obligatorio que sigas. √önicamente se dan a modo de recomendaci√≥n y pueden estar m√°s o menos incompletos seg√∫n como sea tu implementaci√≥n.</p>
<ul class="simple">
<li><p>Cada entrada de la tabla de cuestionarios de la base de datos tendr√° un nuevo atributo (llamado, por ejemplo,  <code class="docutils literal notranslate"><span class="pre">colapsado</span></code>) que almacenar√° su estado de colapso.</p></li>
<li><p>Comienza implementando dos servicios web: uno que devuelva en formato JSON el estado de colapso de un determinado cuestionario (referenciado mediante su id) y otro para cambiarlo.</p></li>
<li><p>Para crear los servicios web anteriores, te puedes inspirar en los servicios que ya has implementado para listar cuestionarios o preguntas.</p></li>
<li><p>Para modificar una entrada de la base de datos con Knex.js puedes usar un c√≥digo como el siguiente que equivale a la instrucci√≥n SQL indicada en el comentario:</p></li>
</ul>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="nx">knex</span><span class="p">(</span><span class="s1">&#39;books&#39;</span><span class="p">)</span>
<span class="linenos">2</span><span class="p">.</span><span class="nx">where</span><span class="p">(</span><span class="s1">&#39;published_date&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;=&#39;</span><span class="p">,</span><span class="w"> </span><span class="mf">2000</span><span class="p">)</span>
<span class="linenos">3</span><span class="p">.</span><span class="nx">update</span><span class="p">({</span>
<span class="linenos">4</span><span class="w">  </span><span class="nx">status</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;archived&#39;</span>
<span class="linenos">5</span><span class="p">});</span>
<span class="linenos">6</span>
<span class="linenos">7</span><span class="c1">// SQL: update `books` set `status` = &#39;archived&#39; where `published_date` &lt; 2000</span>
</pre></div>
</div>
<ul class="simple">
<li><p>Una posible manera de gestionar f√°cilmente el estado de expandido/colapsado de las preguntas de un cuestionario en el navegador es a√±adiendo un atributo <code class="docutils literal notranslate"><span class="pre">data-colapsado</span></code> (con valores <code class="docutils literal notranslate"><span class="pre">true</span></code> o <code class="docutils literal notranslate"><span class="pre">false</span></code>) al elemento <code class="docutils literal notranslate"><span class="pre">section</span></code> que rodea el cuestionario. Con algunas reglas de estilo sencillas basadas en la propiedad <code class="docutils literal notranslate"><span class="pre">display</span></code> de CSS podr√°s hacer que las preguntas de cada cuestionario se muestren o no en la aplicaci√≥n seg√∫n el valor de <code class="docutils literal notranslate"><span class="pre">data-colapsado</span></code>.</p></li>
<li><p>Modifica tu c√≥digo en JavaScript para que el atributo <code class="docutils literal notranslate"><span class="pre">data-colapsado</span></code> se a√±ada con el valor adecuado tanto al crear un nuevo cuestionario como al recuperar la lista de cuestionarios del servidor. Para este segundo caso, tendr√°s que llamar al servicio que devuelve la informaci√≥n de colapso con cada tema de cuestionario. Recuerda c√≥mo funcionan las clausuras en JavaScript si para lo anterior usaras un bucle que iterara sobre todos los temas y llamara con <em>fetch</em> al servicio web con cada uno de ellos; es posible en ese caso que te interese definir una variable con <code class="docutils literal notranslate"><span class="pre">let</span></code> (y no con <code class="docutils literal notranslate"><span class="pre">var</span></code>) para obtener el nodo <code class="docutils literal notranslate"><span class="pre">section</span></code> al que a√±adir el atributo:</p></li>
</ul>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="k">for</span><span class="w"> </span><span class="p">(...)</span><span class="w"> </span><span class="p">{</span><span class="w">  </span><span class="cm">/* itera sobre los temas */</span>
<span class="linenos"> 2</span><span class="w">  </span><span class="p">...</span>
<span class="linenos"> 3</span><span class="w">  </span><span class="kd">let</span><span class="w"> </span><span class="nx">node</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="cm">/* nodo section del cuestionario correspondiente */</span>
<span class="linenos"> 4</span><span class="w">  </span><span class="p">...</span>
<span class="linenos"> 5</span><span class="w">  </span><span class="nx">fetch</span><span class="p">(</span><span class="s2">&quot;...info-colapsado...&quot;</span><span class="p">)</span>
<span class="linenos"> 6</span><span class="w">  </span><span class="p">...</span>
<span class="linenos"> 7</span><span class="w">  </span><span class="p">.</span><span class="nx">then</span><span class="p">(</span>
<span class="linenos"> 8</span><span class="w">  </span><span class="p">...</span>
<span class="linenos"> 9</span><span class="w">    </span><span class="nx">node</span><span class="p">.</span><span class="nx">setAttribute</span><span class="p">(</span><span class="s2">&quot;data-colapsado&quot;</span><span class="p">,...);</span><span class="w"> </span><span class="cm">/* clausura */</span>
<span class="linenos">10</span><span class="w">  </span><span class="p">...</span>
<span class="linenos">11</span><span class="w">  </span><span class="p">)</span>
<span class="linenos">12</span><span class="p">}</span>
</pre></div>
</div>
<ul class="simple">
<li><p>A√±ade un bot√≥n o simplemente texto al inicio de cada cuestionario que permita cambiar el estado de colapsado/expandido. As√≥ciale un nuevo manejador de evento y escribe su c√≥digo inspir√°ndote, por ejemplo, en el de la funci√≥n ya existente que borra un cuestionario. Llama adecuadamente con <em>fetch</em> al servicio de cambio de estado de colapso desde la funci√≥n del nuevo manejador de evento.</p></li>
</ul>
</section>
<section id="destacar-algunas-preguntas-de-un-cuestionario">
<h3><span class="section-number">9.7.2. </span>Destacar algunas preguntas de un cuestionario<a class="headerlink" href="#destacar-algunas-preguntas-de-un-cuestionario" title="Enlace permanente a este encabezado">ÔÉÅ</a></h3>
<p>Modifica tu pr√°ctica 4 para que cada pregunta incluya un nuevo icono (por ejemplo, la estrella ‚òÖ con c√≥digo Unicode U+2605 o un simple asterisco) junto al icono de borrado que permita <em>destacar</em> dicha pregunta. Una pregunta destacada se muestra la primera en la lista de preguntas de un cuestionario dado. Solo se puede destacar una pregunta como m√°ximo en cada cuestionario. Cada clic sobre el icono de destacar activa o desactiva el estado de la pregunta. El color del icono ha de cambiar cuando la pregunta est√© destacada. El estado de destacada de una pregunta se almacenar√° en la base de datos y se mantendr√° aunque la aplicaci√≥n se recargue. Al crear un nueva pregunta, esta estar√° por defecto no destacada.</p>
<p>Cuando se cambia el estado de una pregunta destacada, esta no tiene que volver a su posici√≥n original en la lista de preguntas salvo, quiz√°s, si se recarga la p√°gina. Adem√°s, no tienes que cambiar el siguiente comportamiento, que probablemente ser√° el que tenga tu aplicaci√≥n: al subir una pregunta al principio de la lista, esta pasar√° a ser la pregunta 1 y las siguientes se renumerar√°n en consonancia.</p>
<p>Lo siguiente son algunos consejos relativos a la implementaci√≥n que no es obligatorio que sigas. √önicamente se dan a modo de recomendaci√≥n y pueden estar m√°s o menos incompletos seg√∫n como sea tu implementaci√≥n.</p>
<ul class="simple">
<li><p>Cada entrada de tipo pregunta de la base de datos tendr√° una nueva propiedad (llamada, por ejemplo, <code class="docutils literal notranslate"><span class="pre">destacada</span></code>) que almacenar√° su estado de destacada.</p></li>
<li><p>Comienza a√±adiendo el nuevo icono al bloque en la misma funci√≥n de tu c√≥digo en Javascript en la que a√±ades la cruz de borrado.</p></li>
<li><p>En el DOM del documento representa el estado de una pregunta mediante un atributo <code class="docutils literal notranslate"><span class="pre">data-destacada</span></code> en el elemento del bloque correspondiente:</p></li>
</ul>
<div class="highlight-html notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;bloque&quot;</span> <span class="na">data-destacada</span><span class="o">=</span><span class="s">&quot;true&quot;</span><span class="p">&gt;</span>
<span class="linenos">2</span>  ...
<span class="linenos">3</span><span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</pre></div>
</div>
<ul class="simple">
<li><p>Aseg√∫rate de que en la parte de tu c√≥digo JavaScript encargada de crear una nueva pregunta se inicializa a falso el atributo <code class="docutils literal notranslate"><span class="pre">data-destacada</span></code>.</p></li>
<li><p>A√±ade un manejador de evento para cuando se haga clic sobre el nuevo icono. Este manejador cambia el valor del atributo <code class="docutils literal notranslate"><span class="pre">data-destacada</span></code>.</p></li>
<li><p>Para ahorrarte algunas conversiones, haz que cualquier nueva variable en tu c√≥digo JavaScript que represente el estado de una pregunta sea de tipo cadena y no booleana.</p></li>
<li><p>Modifica la hoja de estilo para que el nuevo icono se muestre junto a la cruz de borrado. A√±ade los estilos necesarios para que se muestre en rojo si la pregunta est√° destacada y en negro en otro caso.</p></li>
<li><p>Modifica el manejador del evento del nuevo icono para que solo cambie el valor de <code class="docutils literal notranslate"><span class="pre">data-destacada</span></code> si no hay otra pregunta destacada en el cuestionario; si la hay, ha de mostrar una ventana de <em>alerta</em> y no hacer nada m√°s.</p></li>
<li><p>Crea un nuevo servicio web para cambiar el valor de la propiedad <code class="docutils literal notranslate"><span class="pre">destacada</span></code> de una pregunta en la base de datos. Es posible que te interese basarte en el codigo ya existente de alg√∫n otro servicio web.</p></li>
<li><p>Para modificar una entrada de la base de datos con Knex.js puedes usar un c√≥digo como el siguiente que equivale a la instrucci√≥n SQL indicada en el comentario:</p></li>
</ul>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="nx">knex</span><span class="p">(</span><span class="s1">&#39;books&#39;</span><span class="p">)</span>
<span class="linenos">2</span><span class="p">.</span><span class="nx">where</span><span class="p">(</span><span class="s1">&#39;published_date&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;=&#39;</span><span class="p">,</span><span class="w"> </span><span class="mf">2000</span><span class="p">)</span>
<span class="linenos">3</span><span class="p">.</span><span class="nx">update</span><span class="p">({</span>
<span class="linenos">4</span><span class="w">  </span><span class="nx">status</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;archived&#39;</span>
<span class="linenos">5</span><span class="p">});</span>
<span class="linenos">6</span>
<span class="linenos">7</span><span class="c1">// SQL: update `books` set `status` = &#39;archived&#39; where `published_date` &lt; 2000</span>
</pre></div>
</div>
<ul class="simple">
<li><p>Cambia tambi√©n el servicio web que se invoca al crear una nueva pregunta para que la propiedad <code class="docutils literal notranslate"><span class="pre">destacada</span></code> se inicialice adecuadamente.</p></li>
<li><p>En el c√≥digo del cliente, cuando el servidor no d√© error al cambiar el estado de una pregunta, mueve la pregunta al inicio de la lista de preguntas del cuestionario; es posible que te venga bien usar la funci√≥n <code class="docutils literal notranslate"><span class="pre">insertBeforeChild</span></code> para ello.</p></li>
<li><p>Haz que al recargar la p√°gina y leer todas las preguntas de un cuestionario, la pregunta destacada se coloque al principio. Modifica los servicios web oportunos para que devuelvan en los datos en JSON la nueva propiedad. Modifica el c√≥digo de la funci√≥n <code class="docutils literal notranslate"><span class="pre">init</span></code> de JavaScript para que al leer las preguntas de cada cuestionario coloque al comienzo la pregunta destacada, si la hay.</p></li>
</ul>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Pie de p√°gina">
        <a href="problemas.html" class="btn btn-neutral float-left" title="8. Problemas" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Anterior</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Derechos de autor 2022-2023, Juan Antonio P√©rez.</p>
  </div>

  Compilado con <a href="https://www.sphinx-doc.org/">Sphinx</a> usando un
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">tema</a>
    proporcionado por <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>